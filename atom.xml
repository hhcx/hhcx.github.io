<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Morning Star&#39;s blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.mls-tech.info/"/>
  <updated>2022-09-03T05:15:48.804Z</updated>
  <id>https://www.mls-tech.info/</id>
  
  <author>
    <name>Morning Star</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>åœ¨ Win10 ä¸Šå¯ç”¨ Docker Desktop ä¸­çš„çš„ Kubernetes é›†ç¾¤</title>
    <link href="https://www.mls-tech.info/microservice/k8s/k8s-enable-in-docker-on-win10/"/>
    <id>https://www.mls-tech.info/microservice/k8s/k8s-enable-in-docker-on-win10/</id>
    <published>2022-09-03T05:01:39.000Z</published>
    <updated>2022-09-03T05:15:48.804Z</updated>
    
    <content type="html"><![CDATA[<p>Docker Desktop ç°åœ¨ç›´æ¥æ”¯æŒéƒ¨ç½²ä¸€ä¸ªå•æœºç‰ˆçš„ Kubernetesï¼Œéå¸¸åˆ©äºå­¦ä¹ å’Œå¼€å‘ç­‰éœ€è¦å•æœºï¼Œä½ç”µè„‘é…ç½®çš„åœºæ™¯ã€‚ æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åœ¨ä¸€å°PCï¼ˆç¬”è®°æœ¬ï¼‰ä¸Šçš„ Win10 ç¯å¢ƒä¸­å®‰è£… Docker Destkop å¹¶å¯ç”¨ Kubernetesã€‚</p><a id="more"></a><h2 id="å®‰è£…-Docker-Desktop"><a href="#å®‰è£…-Docker-Desktop" class="headerlink" title="å®‰è£… Docker Desktop"></a>å®‰è£… Docker Desktop</h2><p>å› ä¸ºæ¯ä¸ª Docker Desktop ç‰ˆæœ¬å¯¹åº”çš„ Kubernetes ç‰ˆæœ¬æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥æœ¬æ–‡ä»¥ 4.10.1 ç‰ˆ Docker Desktop ä¸ºä¾‹</p><p>é¦–å…ˆä¸‹è½½ 4.10.1 ç‰ˆæœ¬çš„ Docker Desktop</p><p>å¦‚æœåœ¨å®˜ç½‘æ‰¾ä¸åˆ°ï¼Œæˆ‘åœ¨ç½‘ç›˜ä¸­å…±äº«äº†ä¸€ä»½</p><p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1ja87uL0dg5BIUOS-IaluSQ" rel="external nofollow noopener noreferrer" target="_blank">https://pan.baidu.com/s/1ja87uL0dg5BIUOS-IaluSQ</a><br>æå–ç ï¼šaj4q</p><p>ä¸‹è½½å¥½ä»¥åï¼ŒåŒå‡»å¯åŠ¨å®‰è£…ç¨‹åº</p><p>åœ¨ Configuration é¡µé¢è®°å¾—é€‰æ‹© â€œUse WSL 2 instead of Hyper-Vâ€ è¿™ä¸ªé€‰æ‹©ï¼Œ å¦‚å›¾:</p><p><img src="/images/k8s/win10-docker-desktop-install-configuration.jpg" alt="docker-desktop-install-configuration"></p><p>å®‰è£…å®Œæˆåç¡®ä¿ Docker Desktop èƒ½æ­£å¸¸å¯åŠ¨è¿è¡Œï¼Œå¦‚å›¾</p><p><img src="/images/k8s/win10-docker-desktop-normal.jpg" alt="docker-desktop-normal"></p><h2 id="æŸ¥çœ‹-Kubernetes-ç‰ˆæœ¬"><a href="#æŸ¥çœ‹-Kubernetes-ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹ Kubernetes ç‰ˆæœ¬"></a>æŸ¥çœ‹ Kubernetes ç‰ˆæœ¬</h2><p>æ£€æŸ¥å½“å‰ Docker Desktop æ‰€å¯¹åº”çš„ç‰ˆæœ¬ï¼Œ åœ¨ Docker Desktop ç•Œé¢ä¸­é€‰æ‹©è®¾ç½®ï¼ˆå³ä¸Šè§’çš„é½¿è½®å›¾æ ‡ï¼‰ï¼Œå†åœ¨å·¦è¾¹çš„åˆ—è¡¨ä¸­é€‰æ‹© â€œKubernetesâ€, å¦‚å›¾</p><p><img src="/images/k8s/win10-docker-desktop-k8s-configuration-1.jpg" alt="docker-desktop-k8s-configurtion"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œ å¯¹åº”çš„ kubernetes ç‰ˆæœ¬ä¸º v1.24.1</p><h2 id="ä¸º-Docker-Desktop-è®¾ç½®å›½å†…é•œåƒä»“åº“"><a href="#ä¸º-Docker-Desktop-è®¾ç½®å›½å†…é•œåƒä»“åº“" class="headerlink" title="ä¸º Docker Desktop è®¾ç½®å›½å†…é•œåƒä»“åº“"></a>ä¸º Docker Desktop è®¾ç½®å›½å†…é•œåƒä»“åº“</h2><p>åœ¨ Docker Engine é¡µé¢åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼Œ</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"registry-mirrors": [</span><br><span class="line">  "https://zy2z5esb.mirror.aliyuncs.com",</span><br><span class="line">  <span class="string">"https://docker.mirrors.ustc.edu.cn"</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>å¦‚å›¾:</p><p><img src="/images/k8s/win10-docker-desktop-setup-mirrors.jpg" alt="docker-desktop-setup-mirrors"></p><p>è®¾ç½®å¥½ä»¥åï¼Œé€‰æ‹© â€œApply &amp; Restartâ€</p><h2 id="æ‹‰å–-Kubernetes-éœ€è¦çš„é•œåƒ"><a href="#æ‹‰å–-Kubernetes-éœ€è¦çš„é•œåƒ" class="headerlink" title="æ‹‰å– Kubernetes éœ€è¦çš„é•œåƒ"></a>æ‹‰å– Kubernetes éœ€è¦çš„é•œåƒ</h2><p>å› ä¸º kubernetes éœ€è¦çš„é•œåƒåœ¨å›½å†…æ‹‰å–ç»å¸¸ä¼šå¤±è´¥ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©ä»å›½å†…çš„é•œåƒä»“åº“ï¼ˆæ¯”å¦‚é˜¿é‡Œï¼‰é•œåƒæ‹‰å–ã€‚</p><p>Github ä¸Šæœ‰ä¸ªé¡¹ç›®å°±æ˜¯ä¸“é—¨ç”¨æ¥å¤„ç†é•œåƒçš„å›½å†…æ‹‰å–çš„: <a href="https://github.com/AliyunContainerService/k8s-for-docker-desktop/blob/master/images.properties" rel="external nofollow noopener noreferrer" target="_blank">k8s-for-docker-desktop/images.properties at master Â· AliyunContainerService/k8s-for-docker-desktop Â· GitHub</a>, æœ¬æ–‡çš„é•œåƒæ‹‰å–éƒ¨åˆ†å‚è€ƒäº†è¯¥ç½‘ç«™ã€‚</p><p>å»ºç«‹ä¸€ä¸ªåä¸º images.properties çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">k8s.gcr.io/pause:3.7=registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.7</span><br><span class="line">k8s.gcr.io/kube-controller-manager:v1.24.1=registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.24.1</span><br><span class="line">k8s.gcr.io/kube-scheduler:v1.24.1=registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.24.1</span><br><span class="line">k8s.gcr.io/kube-proxy:v1.24.1=registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.24.1</span><br><span class="line">k8s.gcr.io/kube-apiserver:v1.24.1=registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.24.1</span><br><span class="line">k8s.gcr.io/etcd:3.5.3-0=registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.5.3-0</span><br><span class="line">k8s.gcr.io/coredns/coredns:v1.8.6=registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:1.8.6</span><br><span class="line">k8s.gcr.io/ingress-nginx/controller:v1.2.0=registry.cn-hangzhou.aliyuncs.com/google_containers/nginx-ingress-controller:v1.2.0</span><br><span class="line">k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.1.1=registry.cn-hangzhou.aliyuncs.com/google_containers/kube-webhook-certgen:v1.1.1</span><br></pre></td></tr></table></figure><p>å†åœ¨ç›¸åŒç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªåä¸º: load_images.ps1 çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">foreach(<span class="variable">$line</span> <span class="keyword">in</span> Get-Content .\images.properties) &#123;</span><br><span class="line">    <span class="variable">$data</span> = <span class="variable">$line</span>.Split(<span class="string">'='</span>)</span><br><span class="line">    <span class="variable">$key</span> = <span class="variable">$data</span>[0];</span><br><span class="line">    <span class="variable">$value</span> = <span class="variable">$data</span>[1];</span><br><span class="line">    Write-Output <span class="string">"<span class="variable">$key</span>=<span class="variable">$value</span>"</span></span><br><span class="line">    docker pull <span class="variable">$&#123;value&#125;</span></span><br><span class="line">    docker tag <span class="variable">$&#123;value&#125;</span> <span class="variable">$&#123;key&#125;</span></span><br><span class="line">    docker rmi <span class="variable">$&#123;value&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿å­˜ä»¥åï¼Œåœ¨ç›®å½•å¼€å¯ä¸€ä¸ª PowerShell çª—å£ï¼Œæ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.\load_images.ps1</span><br></pre></td></tr></table></figure><p>æ‹‰å–å®Œä»¥åï¼Œå¯ä»¥ä½¿ç”¨ docker å‘½ä»¤æŸ¥çœ‹é•œåƒæ˜¯å¦éƒ½æ‹‰å–æˆåŠŸï¼Œæ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p>æ­£å¸¸çš„è¯ï¼Œç³»ç»Ÿæ˜¾ç¤º</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">REPOSITORY                                      TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">k8s.gcr.io/kube-apiserver                       v1.24.1   e9f4b425f919   3 months ago    130MB</span><br><span class="line">k8s.gcr.io/kube-proxy                           v1.24.1   beb86f5d8e6c   3 months ago    110MB</span><br><span class="line">k8s.gcr.io/kube-controller-manager              v1.24.1   b4ea7e648530   3 months ago    119MB</span><br><span class="line">k8s.gcr.io/kube-scheduler                       v1.24.1   18688a72645c   3 months ago    51MB</span><br><span class="line">k8s.gcr.io/ingress-nginx/controller             v1.2.0    04fcc7019408   4 months ago    288MB</span><br><span class="line">k8s.gcr.io/etcd                                 3.5.3-0   aebe758cef4c   4 months ago    299MB</span><br><span class="line">k8s.gcr.io/pause                                3.7       221177c6082a   5 months ago    711kB</span><br><span class="line">k8s.gcr.io/ingress-nginx/kube-webhook-certgen   v1.1.1    c41e9fcadf5a   10 months ago   47.7MB</span><br><span class="line">k8s.gcr.io/coredns/coredns                      v1.8.6    a4ca41631cc7   11 months ago   46.8MB</span><br></pre></td></tr></table></figure><h2 id="å¼€å¯-Kubernetes"><a href="#å¼€å¯-Kubernetes" class="headerlink" title="å¼€å¯ Kubernetes"></a>å¼€å¯ Kubernetes</h2><p>åœ¨ Docker Desktop é¡µé¢ï¼Œé€‰æ‹©è®¾ç½® -&gt; Kubernetes -&gt; Enable Kubernetes, å¦‚å›¾:</p><p><img src="/images/k8s/win10-docker-desktop-enable-k8s.jpg" alt="win10-docker-desktop-enable-k8s"></p><p>ç­‰ä¸€ä¼šå„¿å°±å®‰è£…å¥½äº†ï¼Œå¦‚å›¾ï¼š</p><p><img src="/images/k8s/win10-docker-desktop-enable-k8s-success.jpg" alt="win10-docker-desktop-enable-k8s-success"></p><p>æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨å‘½ä»¤è¡Œçª—å£ä½¿ç”¨ kubectl å‘é€ kubernetes çš„ç›¸å…³å‘½ä»¤äº†ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Docker Desktop ç°åœ¨ç›´æ¥æ”¯æŒéƒ¨ç½²ä¸€ä¸ªå•æœºç‰ˆçš„ Kubernetesï¼Œéå¸¸åˆ©äºå­¦ä¹ å’Œå¼€å‘ç­‰éœ€è¦å•æœºï¼Œä½ç”µè„‘é…ç½®çš„åœºæ™¯ã€‚ æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åœ¨ä¸€å°PCï¼ˆç¬”è®°æœ¬ï¼‰ä¸Šçš„ Win10 ç¯å¢ƒä¸­å®‰è£… Docker Destkop å¹¶å¯ç”¨ Kubernetesã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="microservice" scheme="https://www.mls-tech.info/categories/microservice/"/>
    
      <category term="Kubernetes" scheme="https://www.mls-tech.info/categories/microservice/kubernetes/"/>
    
    
      <category term="microservice" scheme="https://www.mls-tech.info/tags/microservice/"/>
    
      <category term="k8s" scheme="https://www.mls-tech.info/tags/k8s/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ Minikube ä¸­å®‰è£… Istio</title>
    <link href="https://www.mls-tech.info/microservice/k8s/istio-on-minikube_cn/"/>
    <id>https://www.mls-tech.info/microservice/k8s/istio-on-minikube_cn/</id>
    <published>2022-07-28T01:53:28.000Z</published>
    <updated>2022-07-28T01:54:02.567Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://istio.io" rel="external nofollow noopener noreferrer" target="_blank">Istio</a>æ— ç–‘æ˜¯ç°åœ¨æœ€æµè¡Œçš„æœåŠ¡ç½‘æ ¼å¼€æºå®ç°ã€‚å®ƒä»¥é€æ˜å±‚çš„æ–¹å¼æ„å»ºåœ¨ç°æœ‰åˆ†å¸ƒå¼åº”ç”¨ä¸­ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†å„ç§APIï¼Œå¯ä»¥ä¸ä»»ä½•æ—¥å¿—å¹³å°ã€ç›‘æ§ç³»ç»Ÿæˆ–ç­–ç•¥ç³»ç»Ÿé›†æˆã€‚Istioçš„å¤šæ ·åŒ–ç‰¹æ€§å¯ä»¥è®©ä½ é«˜æ•ˆåœ°è¿è¡Œåˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„ï¼Œå¹¶æä¾›ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼æ¥ä¿æŠ¤ã€è¿æ¥å’Œç›‘æ§å¾®æœåŠ¡ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨ Minikubeä¸­å®‰è£… Istioï¼Œä»¥æ–¹ä¾¿å¼€å‘è€…å­¦ä¹ ã€ä½¿ç”¨ Istio ç›¸å…³çš„çŸ¥è¯†ã€‚</p><a id="more"></a><h2 id="å¯åŠ¨-Minikube"><a href="#å¯åŠ¨-Minikube" class="headerlink" title="å¯åŠ¨ Minikube"></a>å¯åŠ¨ Minikube</h2><p>é¦–å…ˆï¼Œåœ¨æœ¬æœºå¯åŠ¨å·²ç»å®‰è£…å¥½çš„ Minikube (å¦‚æœè¿˜æ²¡æœ‰å®‰è£… Minikube, å¯ä»¥å‚è€ƒ<a href="/microservice/k8s/minikube-install-on-apple-silicon-m1_cn/" title="åœ¨ Apple M1 ç”µè„‘ä¸­å®‰è£… minikube">åœ¨ Apple M1 ç”µè„‘ä¸­å®‰è£… minikube</a>è¿›è¡Œå®‰è£…), æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minikube start</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆåŠŸå¯åŠ¨ï¼Œå¯ä»¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„ç³»ç»Ÿè¾“å‡º</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ğŸ˜„  Darwin 12.4 (arm64) ä¸Šçš„ minikube v1.24.0</span><br><span class="line">âœ¨  æ ¹æ®ç°æœ‰çš„é…ç½®æ–‡ä»¶ä½¿ç”¨ docker é©±åŠ¨ç¨‹åº</span><br><span class="line">ğŸ‘  Starting control plane node minikube <span class="keyword">in</span> cluster minikube</span><br><span class="line">ğŸšœ  Pulling base image ...</span><br><span class="line">ğŸ”„  Restarting existing docker container <span class="keyword">for</span> <span class="string">"minikube"</span> ...</span><br><span class="line">ğŸ³  æ­£åœ¨ Docker 20.10.8 ä¸­å‡†å¤‡ Kubernetes v1.22.3â€¦</span><br><span class="line">ğŸ”  Verifying Kubernetes components...</span><br><span class="line">    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/storage-provisioner:v5</span><br><span class="line">ğŸŒŸ  Enabled addons: storage-provisioner, default-storageclass</span><br><span class="line"></span><br><span class="line">â—  /usr/<span class="built_in">local</span>/bin/kubectl is version 1.24.0, <span class="built_in">which</span> may have incompatibilites with Kubernetes 1.22.3.</span><br><span class="line">    â–ª Want kubectl v1.22.3? Try <span class="string">'minikube kubectl -- get pods -A'</span></span><br><span class="line">ğŸ„  Done! kubectl is now configured to use <span class="string">"minikube"</span> cluster and <span class="string">"default"</span> namespace by default</span><br></pre></td></tr></table></figure><h2 id="ä¸‹è½½-Istio"><a href="#ä¸‹è½½-Istio" class="headerlink" title="ä¸‹è½½ Istio"></a>ä¸‹è½½ Istio</h2><p>ç›´æ¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://istio.io/downloadIstio | sh -</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç›´æ¥åˆ° <a href="https://github.com/istio/istio/releases/tag/1.14.2" rel="external nofollow noopener noreferrer" target="_blank">Istio çš„ release é¡µé¢</a>ç›´æ¥é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½ï¼Œ å› ä¸ºè¦å®‰è£…åœ¨ Apple M1 ç”µè„‘ä¸Šï¼Œæˆ‘ä»¬é€‰æ‹© osx-arm64 çš„è¿™ä¸ªç‰ˆæœ¬ã€‚</p><p>ä¸‹è½½å®Œæˆåï¼Œè¿›å…¥ isito-1.14.2 ç›®å½•ã€‚å› ä¸ºæˆ‘ä»¬é»˜è®¤çš„å®‰è£…ç›®å½•æ˜¯ ~\Devel\isito-1.14.2, æ‰€ä»¥æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~\Devel\isito-1.14.2</span><br></pre></td></tr></table></figure><p>å°† ~\Devel\isito-1.14.2\bin æ·»åŠ åˆ°ç³»ç»Ÿ PATH ä¸­å»ã€‚</p><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ macOS é»˜è®¤çš„ zsh, åˆ™ç¼–è¾‘ç”¨æˆ·ç›®å½•ä¸‹çš„ .zprofileï¼Œ åŠ å…¥ç±»ä¼¼ä¸‹é¢çš„ä¸€è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="string">"<span class="variable">$PATH</span>:/Users/xxx/Devel/istio-1.14.2/bin"</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„ï¼šç”¨ä½ çš„ç”¨æˆ·åæ›¿æ¢ä¸Šä¸€è¡Œä¸­çš„ xxx</strong></p></blockquote><p>ä¸ºè®©ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆï¼Œå¯ä»¥æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.zprofile</span><br></pre></td></tr></table></figure><h2 id="æ£€æµ‹æ˜¯å¦å¯ä»¥æ­£å¸¸å®‰è£…"><a href="#æ£€æµ‹æ˜¯å¦å¯ä»¥æ­£å¸¸å®‰è£…" class="headerlink" title="æ£€æµ‹æ˜¯å¦å¯ä»¥æ­£å¸¸å®‰è£…"></a>æ£€æµ‹æ˜¯å¦å¯ä»¥æ­£å¸¸å®‰è£…</h2><p>æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">istioctl x precheck</span><br></pre></td></tr></table></figure><blockquote><p>**åœ¨ MacOS ä¸­ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ï¼Œä¼šå‡ºç°å®‰å…¨æé†’ï¼Œåˆ°â€ç³»ç»Ÿåå¥½è®¾ç½®â€œ -&gt; â€œå®‰å…¨æ€§ä¸éšç§â€ ä¸­å»åŒæ„</p></blockquote><p>å¦‚æœçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„ç³»ç»Ÿè¾“å‡ºï¼Œåˆ™è¯´æ˜ istio å¯ä»¥åœ¨ä½ çš„ç³»ç»Ÿä¸­æ­£å¸¸å®‰è£…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">âœ” No issues found when checking the cluster. Istio is safe to install or upgrade!</span><br><span class="line">  To get started, check out https://istio.io/latest/docs/setup/getting-started/</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">istioctl install</span><br></pre></td></tr></table></figure><p>å¦‚æœçœ‹åˆ°ç³»ç»Ÿæ˜¾ç¤ºç±»ä¼¼ä»¥ä¸‹çš„ä¿¡æ¯ï¼Œåˆ™è¡¨æ˜å®‰è£…æˆåŠŸ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">This will install the Istio 1.14.2 default profile with [<span class="string">"Istio core"</span> <span class="string">"Istiod"</span> <span class="string">"Ingress gateways"</span>] components into the cluster. Proceed? (y/N) y</span><br><span class="line">âœ” Istio core installed                                                                                                                                        </span><br><span class="line">âœ” Istiod installed                                                                                                                                            </span><br><span class="line">âœ” Ingress gateways installed                                                                                                                                  </span><br><span class="line">âœ” Installation complete                                                                                                                                       Making this installation the default <span class="keyword">for</span> injection and validation.</span><br><span class="line"></span><br><span class="line">Thank you <span class="keyword">for</span> installing Istio 1.14.  Please take a few minutes to tell us about your install/upgrade experience!  https://forms.gle/yEtCbt45FZ3VoDT5A</span><br></pre></td></tr></table></figure><h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><p>æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get ns</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ç³»ç»Ÿæ˜¾ç¤ºå¦‚ä¸‹ä¿¡æ¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NAME              STATUS   AGE</span><br><span class="line">default           Active   211d</span><br><span class="line">istio-system      Active   26m</span><br><span class="line">kube-node-lease   Active   211d</span><br><span class="line">kube-public       Active   211d</span><br><span class="line">kube-system       Active   211d</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ istio-system å°±æ˜¯ istio ç›¸å…³ç³»ç»Ÿç»„ä»¶ä½¿ç”¨çš„å‘½åç©ºé—´</p><p>æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pods -n istio-system</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ istio-system ä¸­çš„ pod</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NAME                                   READY   STATUS    RESTARTS   AGE</span><br><span class="line">istio-ingressgateway-f65885448-psxjh   1/1     Running   0          26m</span><br><span class="line">istiod-5cdcff89c6-4lvvz                1/1     Running   0          28m</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œ istio åœ¨ minikube ä¸­å®‰è£…äº†ä¸¤ä¸ª pod, åˆ†åˆ«æ˜¯ istio-ingressgateway å’Œ istiod</p><p>æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get svc  -n istio-system</span><br></pre></td></tr></table></figure><p>å¯ä»¥æŸ¥çœ‹å¯¹åº”çš„æœåŠ¡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NAME                   TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)                                      AGE</span><br><span class="line">istio-ingressgateway   LoadBalancer   10.98.168.55    &lt;pending&gt;     15021:30788/TCP,80:32586/TCP,443:30008/TCP   29m</span><br><span class="line">istiod                 ClusterIP      10.96.193.232   &lt;none&gt;        15010/TCP,15012/TCP,443/TCP,15014/TCP        30m</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://istio.io&quot; rel=&quot;external nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&gt;Istio&lt;/a&gt;æ— ç–‘æ˜¯ç°åœ¨æœ€æµè¡Œçš„æœåŠ¡ç½‘æ ¼å¼€æºå®ç°ã€‚å®ƒä»¥é€æ˜å±‚çš„æ–¹å¼æ„å»ºåœ¨ç°æœ‰åˆ†å¸ƒå¼åº”ç”¨ä¸­ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†å„ç§APIï¼Œå¯ä»¥ä¸ä»»ä½•æ—¥å¿—å¹³å°ã€ç›‘æ§ç³»ç»Ÿæˆ–ç­–ç•¥ç³»ç»Ÿé›†æˆã€‚Istioçš„å¤šæ ·åŒ–ç‰¹æ€§å¯ä»¥è®©ä½ é«˜æ•ˆåœ°è¿è¡Œåˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„ï¼Œå¹¶æä¾›ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼æ¥ä¿æŠ¤ã€è¿æ¥å’Œç›‘æ§å¾®æœåŠ¡ã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨ Minikubeä¸­å®‰è£… Istioï¼Œä»¥æ–¹ä¾¿å¼€å‘è€…å­¦ä¹ ã€ä½¿ç”¨ Istio ç›¸å…³çš„çŸ¥è¯†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="microservice" scheme="https://www.mls-tech.info/categories/microservice/"/>
    
      <category term="Kubernetes" scheme="https://www.mls-tech.info/categories/microservice/kubernetes/"/>
    
    
      <category term="microservice" scheme="https://www.mls-tech.info/tags/microservice/"/>
    
      <category term="k8s" scheme="https://www.mls-tech.info/tags/k8s/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨ Apple M1 ç”µè„‘ä¸­å®‰è£… minikube</title>
    <link href="https://www.mls-tech.info/microservice/k8s/minikube-install-on-apple-silicon-m1_cn/"/>
    <id>https://www.mls-tech.info/microservice/k8s/minikube-install-on-apple-silicon-m1_cn/</id>
    <published>2022-07-27T06:42:10.000Z</published>
    <updated>2022-07-27T08:50:58.692Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬é€šå¸¸åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒå®‰è£… Minikube, ç”¨æ¥å­¦ä¹ ã€ä½“éªŒ K8s çš„åŸºæœ¬åŠŸèƒ½ï¼Œä¹Ÿç”¨æ¥æ¨¡æ‹Ÿæµ‹è¯•åº”ç”¨éƒ¨ç½²åœ¨ k8s çš„æƒ…å†µã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨ Apple M1 ç”µè„‘ä¸­å®‰è£… Minikubeã€‚</p><a id="more"></a><h2 id="å®‰è£…-Docker"><a href="#å®‰è£…-Docker" class="headerlink" title="å®‰è£… Docker"></a>å®‰è£… Docker</h2><p>åœ¨ <a href="https://www.docker.com/products/docker-desktop" rel="external nofollow noopener noreferrer" target="_blank">Dockerå®˜æ–¹ç½‘ç«™</a> ä¸‹è½½ Docker Desktop, é€‰æ‹© Mac with Apple Chip çš„ç‰ˆæœ¬ã€‚</p><p>ä¸‹è½½å®Œæˆåè¿›è¡Œå®‰è£…ï¼ŒæŒ‰æç¤ºé»˜è®¤å®‰è£…å³å¯ã€‚</p><h2 id="ä¸‹è½½-minikube"><a href="#ä¸‹è½½-minikube" class="headerlink" title="ä¸‹è½½ minikube"></a>ä¸‹è½½ minikube</h2><p>ä¸‹è½½ minikube çš„ arm64 çš„ç‰ˆæœ¬ï¼Œä¸‹è½½åœ°å€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-arm64</span><br></pre></td></tr></table></figure><p>ä¸‹è½½å®Œæˆåçš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸éœ€è¦å®‰è£…ã€‚åªéœ€è¦èµ‹äºˆæ‰§è¡Œæƒé™å¹¶æ”¾ç½®åˆ° PATH è·¯å¾„ä¸‹å³å¯ã€‚ æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x minikube-darwin-arm64</span><br></pre></td></tr></table></figure><p>ç„¶å</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv minikube-darwin-arm64 /usr/<span class="built_in">local</span>/bin/minikube</span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨-minikube"><a href="#å¯åŠ¨-minikube" class="headerlink" title="å¯åŠ¨ minikube"></a>å¯åŠ¨ minikube</h2><p>æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minikube start --driver=docker</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€æ¬¡è¿è¡Œå¯èƒ½ä¼šæç¤ºè¯¥ç¨‹åº(minikube)æ²¡æœ‰æ˜¯ä¸å®‰å…¨çš„ç¨‹åºè€Œé˜»æ­¢è¿è¡Œï¼Œè¿™æ—¶å€™éœ€è¦åœ¨ â€œç³»ç»Ÿåå¥½è®¾ç½®â€ -&gt; â€œå®‰å…¨ä¸éšç§â€ -&gt; â€œé€šç”¨â€ ä¸­å®ŒæˆåŒæ„è¿è¡Œçš„æ“ä½œï¼Œé€‰æ‹©â€ä¾ç„¶è¿è¡Œâ€ã€‚ ç„¶åå†æ¬¡åœ¨ç»ˆç«¯çª—å£ä¸­è¿è¡Œå¯åŠ¨çš„å‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minikube start --driver=<span class="string">"docker"</span> --memory=2048 --image-mirror-country=<span class="string">"cn"</span></span><br></pre></td></tr></table></figure><p>ç³»ç»Ÿè¾“å‡º</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ğŸ˜„  Darwin 12.0.1 (arm64) ä¸Šçš„ minikube v1.24.0</span><br><span class="line">âœ¨  æ ¹æ®ç”¨æˆ·é…ç½®ä½¿ç”¨ docker é©±åŠ¨ç¨‹åº</span><br><span class="line">âœ…  æ­£åœ¨ä½¿ç”¨é•œåƒå­˜å‚¨åº“ registry.cn-hangzhou.aliyuncs.com/google_containers</span><br><span class="line">ğŸ‘  Starting control plane node minikube <span class="keyword">in</span> cluster minikube</span><br><span class="line">ğŸšœ  Pulling base image ...</span><br><span class="line">ğŸ”¥  Creating docker container (CPUs=2, Memory=2048MB) ...</span><br><span class="line">ğŸ³  æ­£åœ¨ Docker 20.10.8 ä¸­å‡†å¤‡ Kubernetes v1.22.3â€¦</span><br><span class="line">    â–ª Generating certificates and keys ...</span><br><span class="line">    â–ª Booting up control plane ...</span><br><span class="line">    â–ª Configuring RBAC rules ...</span><br><span class="line">ğŸ”  Verifying Kubernetes components...</span><br><span class="line">    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/storage-provisioner:v5</span><br><span class="line">ğŸŒŸ  Enabled addons: storage-provisioner, default-storageclass</span><br><span class="line">ğŸ„  Done! kubectl is now configured to use <span class="string">"minikube"</span> cluster and <span class="string">"default"</span> namespace by default</span><br></pre></td></tr></table></figure><h2 id="æ£€æŸ¥minikubeçŠ¶æ€"><a href="#æ£€æŸ¥minikubeçŠ¶æ€" class="headerlink" title="æ£€æŸ¥minikubeçŠ¶æ€"></a>æ£€æŸ¥minikubeçŠ¶æ€</h2><p>æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minikube status</span><br></pre></td></tr></table></figure><p>ç³»ç»Ÿæ˜¾ç¤º</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">minikube</span><br><span class="line"><span class="built_in">type</span>: Control Plane</span><br><span class="line">host: Running</span><br><span class="line">kubelet: Running</span><br><span class="line">apiserver: Running</span><br><span class="line">kubeconfig: Configured</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ docker images å’Œ docker ps å‘½ä»¤æŸ¥çœ‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">REPOSITORY                                                    TAG                                                     IMAGE ID       CREATED        SIZE</span><br><span class="line">docker/desktop-kubernetes                                     kubernetes-v1.22.4-cni-v0.8.5-critools-v1.17.0-debian   84694ddaaffe   5 weeks ago    287MB</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CONTAINER ID   IMAGE                                                                 COMMAND                  CREATED          STATUS          PORTS                                                                                                                                  NAMES</span><br><span class="line">98ffccd83d9c   registry.cn-hangzhou.aliyuncs.com/google_containers/kicbase:v0.0.28   <span class="string">"/usr/local/bin/entrâ€¦"</span>   26 minutes ago   Up 26 minutes   127.0.0.1:61388-&gt;22/tcp, 127.0.0.1:61389-&gt;2376/tcp, 127.0.0.1:61391-&gt;5000/tcp, 127.0.0.1:61387-&gt;8443/tcp, 127.0.0.1:61390-&gt;32443/tcp   minikube</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå®é™…ä¸Š pull ä¸€ä¸ªåä¸º desktop-kubernetes çš„è¿›è¡Œå¹¶è¿è¡Œäº†å¯¹åº”çš„å®¹å™¨å½¢æˆçš„ minikube çš„å®ä¾‹ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘ä»¬é€šå¸¸åœ¨æœ¬åœ°å¼€å‘ç¯å¢ƒå®‰è£… Minikube, ç”¨æ¥å­¦ä¹ ã€ä½“éªŒ K8s çš„åŸºæœ¬åŠŸèƒ½ï¼Œä¹Ÿç”¨æ¥æ¨¡æ‹Ÿæµ‹è¯•åº”ç”¨éƒ¨ç½²åœ¨ k8s çš„æƒ…å†µã€‚æœ¬æ–‡ä»‹ç»å¦‚ä½•åœ¨ Apple M1 ç”µè„‘ä¸­å®‰è£… Minikubeã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="microservice" scheme="https://www.mls-tech.info/categories/microservice/"/>
    
      <category term="Kubernetes" scheme="https://www.mls-tech.info/categories/microservice/kubernetes/"/>
    
    
      <category term="microservice" scheme="https://www.mls-tech.info/tags/microservice/"/>
    
      <category term="k8s" scheme="https://www.mls-tech.info/tags/k8s/"/>
    
  </entry>
  
  <entry>
    <title>Scheduled Tasks in a Spring Boot Application</title>
    <link href="https://www.mls-tech.info/java/how-to-implement-scheduled-tasks-spring-boot/"/>
    <id>https://www.mls-tech.info/java/how-to-implement-scheduled-tasks-spring-boot/</id>
    <published>2022-01-28T03:17:31.000Z</published>
    <updated>2022-01-28T03:28:59.675Z</updated>
    
    <content type="html"><![CDATA[<p>In this article, we demostrate how to define the scheduled tasks in a Spring Boot Application.</p><a id="more"></a><h2 id="Why-you-need-scheduled-tasks-in-a-Spring-Boot-application"><a href="#Why-you-need-scheduled-tasks-in-a-Spring-Boot-application" class="headerlink" title="Why you need scheduled tasks in a Spring Boot application?"></a>Why you need scheduled tasks in a Spring Boot application?</h2><p>In enterprise applications, it is often necessary to add follow-up processing to web requests, or perform some timed tasks, such as: Scheduled cleaning of temporary tables, Scheduled summary of data, etc. Spring Boot provides good support for this type of task, and it is very convenient to develop.</p><p>In fact, Spring Boot provides at least two ways to perform scheduled tasksï¼š One is to use @Async annotation, Another is to use @Scheduled annotation.</p><h2 id="Use-Async"><a href="#Use-Async" class="headerlink" title="Use @Async"></a>Use @Async</h2><p>To define a task that executes asynchronously, all you need to do is to add @Async to the method in the container-managed bean. The most common approach is to define a task as a container-managed bean, annotate it with @Component, and then annotate the method you want to execute with @Async:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AsyncTask</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger LOG = LoggerFactory.getLogger(AsyncTask<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            LOG.info(<span class="string">"NO.&#123;&#125; message is: &#123;&#125;"</span>, i + <span class="number">1</span>,  message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Calls can then be made where appropriate, such as in business-layer code, which can be written as:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> AsyncTask asyncTask;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">asyncTask.sendMessage(<span class="string">"Hello"</span>);</span><br></pre></td></tr></table></figure><h2 id="Use-Scheduled"><a href="#Use-Scheduled" class="headerlink" title="Use @Scheduled"></a>Use @Scheduled</h2><p>Defines a container-managed Bean in which the method is defined as scheduled execution:</p><h3 id="Execution-at-fixed-intervals"><a href="#Execution-at-fixed-intervals" class="headerlink" title="Execution at fixed intervals"></a>Execution at fixed intervals</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BackupDBTask</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger LOG = LoggerFactory.getLogger(BackupDBTask<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Scheduled</span>(fixedDelay = <span class="number">1000</span>, initialDelay = <span class="number">1000</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scheduleFixedRateWithInitialDelayTask</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> now = System.currentTimeMillis() / <span class="number">1000</span>;</span><br><span class="line">        LOG.info(<span class="string">"Execute: backup Database, time = &#123;&#125; "</span>, now);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Configure-timing-with-Cron-syntax"><a href="#Configure-timing-with-Cron-syntax" class="headerlink" title="Configure timing with Cron syntax"></a>Configure timing with Cron syntax</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BackupDBTask</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger LOG = LoggerFactory.getLogger(BackupDBTask<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Scheduled</span>(cron = <span class="string">"0 */1 * * * ?"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">scheduleTaskUsingCronExpression</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> now = System.currentTimeMillis() / <span class="number">1000</span>;</span><br><span class="line">        LOG.info(</span><br><span class="line">                <span class="string">"schedule tasks using cron jobs - Time = &#123;&#125;"</span>, now);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The above code is executed every minute.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;In this article, we demostrate how to define the scheduled tasks in a Spring Boot Application.&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.mls-tech.info/categories/java/"/>
    
      <category term="SpringBoot" scheme="https://www.mls-tech.info/categories/java/springboot/"/>
    
    
      <category term="java" scheme="https://www.mls-tech.info/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>How to use the Hot Load in development of Spring Boot Application</title>
    <link href="https://www.mls-tech.info/java/howto-hot-load-in-development-spring-boot-application/"/>
    <id>https://www.mls-tech.info/java/howto-hot-load-in-development-spring-boot-application/</id>
    <published>2022-01-27T09:01:19.000Z</published>
    <updated>2022-01-27T11:31:25.245Z</updated>
    
    <content type="html"><![CDATA[<p>In the development of Spring Boot applications, if you do not want to restart the application repeatedly, you can use Spring Bootâ€™s DevTools tool to implement the Hot Load function. This article show you how to use the Hot Load in IntelliJ IDEA.</p><a id="more"></a><h2 id="Add-Dependency"><a href="#Add-Dependency" class="headerlink" title="Add Dependency"></a>Add Dependency</h2><p>First, we need add the dependency - DevTools in Spring Boot Application.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>The <strong>optional</strong> option is to prevent devtools dependencies from being passed to other modules. When a developer packages an app and runs it, devtools is automatically disabled</p><p>The <strong>runtime</strong> option in scope - it set the dependency(package) only works at runtime, not when packaging (prevents the execution of the packaged program online, starts the file listening thread File Watcher, consumes a lot of memory resources)</p><h2 id="Launch-the-hot-load-feature-in-IntelliJ-IDEA"><a href="#Launch-the-hot-load-feature-in-IntelliJ-IDEA" class="headerlink" title="Launch the hot load feature in IntelliJ IDEA"></a>Launch the hot load feature in IntelliJ IDEA</h2><ol><li><p>Settings-compiler-make project automatically</p></li><li><p>ctrl+shift+alt+/ to activates the Registry dialog box (Mac OS activates the Registry dialog box by double-clicking the shift key)</p></li><li><p>In the second step of the dialog box, check compiler.automake.allow.when.app.running</p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;In the development of Spring Boot applications, if you do not want to restart the application repeatedly, you can use Spring Bootâ€™s DevTools tool to implement the Hot Load function. This article show you how to use the Hot Load in IntelliJ IDEA.&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.mls-tech.info/categories/java/"/>
    
      <category term="SpringBoot" scheme="https://www.mls-tech.info/categories/java/springboot/"/>
    
    
      <category term="java" scheme="https://www.mls-tech.info/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>How to build Spring Boot WEB application with Freemarker (Update to Spring Boot 2.6 and Java 17)</title>
    <link href="https://www.mls-tech.info/java/howto-build-spring-boot-web-application-with-freemarker/"/>
    <id>https://www.mls-tech.info/java/howto-build-spring-boot-web-application-with-freemarker/</id>
    <published>2022-01-26T04:47:19.000Z</published>
    <updated>2022-01-26T07:38:04.137Z</updated>
    
    <content type="html"><![CDATA[<p>This article demonstrate: How to build a Spring Boot WEB applicaiton with Freemarker.</p><a id="more"></a><h2 id="Why-use-the-Freemarker-in-Spring-Boot-Web-Application"><a href="#Why-use-the-Freemarker-in-Spring-Boot-Web-Application" class="headerlink" title="Why use the Freemarker in Spring Boot Web Application"></a>Why use the Freemarker in Spring Boot Web Application</h2><p>As a relatively obsolete technologyï¼ŒBy default, the Freemarker is not used as a template for web page rendering in Spring Boot 2, However, in the face of some old system upgrades written in Freemarker, you may also want to be able to configure support for Freemarker.</p><p>Next, letâ€™s build a Spring Boot Web Application from scratch and then add support for Freemarker.</p><h2 id="Development-Environment"><a href="#Development-Environment" class="headerlink" title="Development Environment"></a>Development Environment</h2><p>In tutorial, we use the following softeware environment, and all softwares are free.</p><p>Java: JDK 17 Oracle JDK 17, download it from <a href="https://www.oracle.com/java/technologies/downloads/" rel="external nofollow noopener noreferrer" target="_blank">Offical Website</a></p><p>IDE: IntelliJ IDEA 2021.3.1 Community, download it from <a href="https://www.jetbrains.com/idea/download/#section=windows" rel="external nofollow noopener noreferrer" target="_blank">Offical Website</a></p><h2 id="Generate-a-Spring-Boot-Web-Application-Example"><a href="#Generate-a-Spring-Boot-Web-Application-Example" class="headerlink" title="Generate a Spring Boot Web Application Example"></a>Generate a Spring Boot Web Application Example</h2><p>In <a href="https://start.spring.io/" rel="external nofollow noopener noreferrer" target="_blank">Spring Boot Starter</a>, fill in the basic configuration information(Artifact: todo-restful-service) of the project and the third-party components that need to be used in the project.</p><p>In this turorail, we suggest to choose:</p><ul><li>â€˜Javaâ€™ as the language</li><li>â€˜Maven Projectâ€™ as the Project (type)</li><li>the version of Spring Boot chooses the latest stable version 2.6.3.</li><li>â€˜Jarâ€™ as the package (type)</li><li>the version of Java choose Java 17</li></ul><p>And choose the following dependencies:</p><ul><li>Spring Web</li><li>Freemarker</li></ul><p>After completed the above steps, click the â€œGenerateâ€ button to download the generated project basic package. Unizip it and open it with IntelliJ IDEA IDE.</p><h2 id="Create-a-Spring-MVC-Controller"><a href="#Create-a-Spring-MVC-Controller" class="headerlink" title="Create a Spring MVC Controller"></a>Create a Spring MVC Controller</h2><p>In Spring Boot Web Application, each HTTP request can be configured to respond with a corresponding method in the Controller. In this case, we built a Controller to respond to the root path.</p><p>Create a new package named controller and create a new class in the package named IndexController, as follows:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>About the more information about spring mvc controller, you can refer the <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-controller" rel="external nofollow noopener noreferrer" target="_blank">Offical Documentation</a></p><h2 id="Create-a-Freemarker-page"><a href="#Create-a-Freemarker-page" class="headerlink" title="Create a Freemarker page"></a>Create a Freemarker page</h2><p>In src/main/template folder, create an new file, named: index.ftl. And fill the following content into it:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello Freemarker!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello Freemarker<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Configure-Freemarker-view"><a href="#Configure-Freemarker-view" class="headerlink" title="Configure Freemarker view"></a>Configure Freemarker view</h2><p>Rename the application.properties file in src/main/resources: application.yml, and add the following:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">freemarker:</span></span><br><span class="line">    <span class="attr">cache:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">template-loader-paht:</span> <span class="string">classpath:/templates</span></span><br><span class="line">    <span class="attr">suffix:</span> <span class="string">.ftl</span></span><br></pre></td></tr></table></figure><h2 id="Run-Web-Application"><a href="#Run-Web-Application" class="headerlink" title="Run Web Application"></a>Run Web Application</h2><p>Run the Web Application</p><p>If you run it in console, you can execute:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn spring-boot:run</span><br></pre></td></tr></table></figure><p>If you use IDE tools, you can call maven in the IDE menu to run the application.</p><p>After the application is running, you can access the following URL via your browse.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080</span><br></pre></td></tr></table></figure><p>You can see something like this in your browser</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello Freemarker!</span><br></pre></td></tr></table></figure><h2 id="Download-the-Code"><a href="#Download-the-Code" class="headerlink" title="Download the Code"></a>Download the Code</h2><p>You can download the completed code from <a href="https://github.com/MaxM2013/spring-boot-web-application-example-with-freemarker" rel="external nofollow noopener noreferrer" target="_blank">GitHub</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;This article demonstrate: How to build a Spring Boot WEB applicaiton with Freemarker.&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.mls-tech.info/categories/java/"/>
    
      <category term="SpringBoot" scheme="https://www.mls-tech.info/categories/java/springboot/"/>
    
    
      <category term="java" scheme="https://www.mls-tech.info/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>How to enable lombok annotations in IDEA IDE</title>
    <link href="https://www.mls-tech.info/java/howto-enable-lombok-annotations-in-idea/"/>
    <id>https://www.mls-tech.info/java/howto-enable-lombok-annotations-in-idea/</id>
    <published>2022-01-25T07:02:57.000Z</published>
    <updated>2022-01-25T07:04:26.977Z</updated>
    
    <content type="html"><![CDATA[<p>Lombok is a useful tool library for Java third-party libraries. Ideal for simplifying the writing of entity classes. A lot of get, set code, and constructors are omitted. However, in the IDEA Community version, Lombok recognition is not turned on by default, so it will always prompt an error when writing code in the IDE.</p><a id="more"></a><h2 id="Turn-on-annotation-processing-options"><a href="#Turn-on-annotation-processing-options" class="headerlink" title="Turn on annotation processing options"></a>Turn on annotation processing options</h2><p>In the IDEA menu, select File -&gt; Settings, and then select in the Settings window that pops up</p><p>â€œBuild, Execution, Deploymentâ€ -&gt; Compiler -&gt; â€œAnnotation Processorsâ€, then tick â€œEnable Annotation Processingâ€ on the right, as shown in the following figure:</p><p><img src="/images/java/spring/spring-idea-annation-process.png" alt="Enable Annotation Processing"></p><h2 id="Install-Lombok-Plugin"><a href="#Install-Lombok-Plugin" class="headerlink" title="Install Lombok Plugin"></a>Install Lombok Plugin</h2><p>In the Settings window just now, select Plugins, enter Lombok in â€œSearch plugins in marketplaceâ€ to find it, display Lombok and click â€œInstallâ€ to install. As shown in the figure:</p><p><img src="/images/java/spring/spring-idea-annation-process-2.png" alt="Enable Annotation Processing"></p><p>Once the installation is complete, follow the prompts to restart IDEA.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Lombok is a useful tool library for Java third-party libraries. Ideal for simplifying the writing of entity classes. A lot of get, set code, and constructors are omitted. However, in the IDEA Community version, Lombok recognition is not turned on by default, so it will always prompt an error when writing code in the IDE.&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.mls-tech.info/categories/java/"/>
    
    
      <category term="java" scheme="https://www.mls-tech.info/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>How to build Restful Service with Spring Boot - A Step by Step Tutorial for Beginner - 1 (Update to Spring Boot 2.6 and Java 17)</title>
    <link href="https://www.mls-tech.info/java/howto-build-restful-service-with-spring-boot/"/>
    <id>https://www.mls-tech.info/java/howto-build-restful-service-with-spring-boot/</id>
    <published>2022-01-25T03:58:37.000Z</published>
    <updated>2022-01-25T11:41:28.112Z</updated>
    
    <content type="html"><![CDATA[<p>This is a step by step tutorail for beginner, you can learn how to use spring boot to build a restful service (api). And we also show you: how to connect DB with spring data, how to validate user input with hibernate validation, and how to document your api (restful service) with Swagger.</p><a id="more"></a><h2 id="Development-Environment"><a href="#Development-Environment" class="headerlink" title="Development Environment"></a>Development Environment</h2><p>In tutorial, we use the following softeware environment, and all softwares are free.</p><p>Java: JDK 17 Oracle JDK 17, download it from <a href="https://www.oracle.com/java/technologies/downloads/" rel="external nofollow noopener noreferrer" target="_blank">Offical Website</a></p><p>IDE: IntelliJ IDEA 2021.3.1 Community, download it from <a href="https://www.jetbrains.com/idea/download/#section=windows" rel="external nofollow noopener noreferrer" target="_blank">Offical Website</a></p><h2 id="Generate-Project-Skeleton"><a href="#Generate-Project-Skeleton" class="headerlink" title="Generate Project Skeleton"></a>Generate Project Skeleton</h2><p>In <a href="https://start.spring.io/" rel="external nofollow noopener noreferrer" target="_blank">Spring Boot Starter</a>, fill in the basic configuration information(Artifact: todo-restful-service) of the project and the third-party components that need to be used in the project.</p><p>In this turorail, we suggest to choose:</p><ul><li>â€˜Javaâ€™ as the language</li><li>â€˜Maven Projectâ€™ as the Project (type)</li><li>the version of Spring Boot chooses the latest stable version 2.6.2.</li><li>â€˜Jarâ€™ as the package (type)</li><li>the version of Java choose Java 17</li></ul><p>And choose the following dependencies:</p><ul><li>Lombok</li><li>Spring Web</li><li>Spring Data JPA</li><li>H2 Database</li></ul><p>After completed the above steps, click the â€œGenerateâ€ button to download the generated project basic package.</p><p>We get a file named: todo-restful-service.zip, unzip it and use IDEA to open the project directory. Because there is a pom.xml file in the directory, IDEA can detect that this is a maven project and automatically download the dependencies packages.</p><p>Because the project is Maven project, we can see the project structure as following:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">todo-restful-service</span><br><span class="line">  + .mvn</span><br><span class="line">  + src</span><br><span class="line">    + main</span><br><span class="line">      + java</span><br><span class="line">      + resources</span><br><span class="line">    + <span class="built_in">test</span></span><br><span class="line">      + java</span><br><span class="line">  .gitignore</span><br><span class="line">  HELP.md</span><br><span class="line">  mvnw</span><br><span class="line">  mvnw.cmd</span><br><span class="line">  pom.xml</span><br></pre></td></tr></table></figure><p>In this tutorial, we foucs on the â€˜srcâ€™ folder, because the code we will write or modify is stored in it.</p><h2 id="Create-the-first-RESTful-Service"><a href="#Create-the-first-RESTful-Service" class="headerlink" title="Create the first RESTful Service"></a>Create the first RESTful Service</h2><p>In Spring Boot, create an RESTful service is very simple:</p><ul><li>First, create a POJO Java class</li><li>Second, add two annotations(RestController, RequestMapping) for class</li><li>Define a common method that returns a string in the class and add annotation(GetMapping) for this method.</li></ul><p>The completed code as below:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OkApi</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">ok</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"ok"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Now, run the program and visit the address</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080</span><br></pre></td></tr></table></figure><p>then you can see the â€œokâ€ is display in browser.</p><h2 id="Add-a-Todo-Service"><a href="#Add-a-Todo-Service" class="headerlink" title="Add a Todo Service"></a>Add a Todo Service</h2><p>In this chapter, we create an new service: Todo. It is used to expose the â€˜Todoâ€™ resource.</p><p>First, letâ€™s create a new â€˜modelâ€™ package in the project, and then create a POJO Java class in it, named: Todo, add a few basic attributes to the class:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Todo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In the class, we have neither written get, set methods nor constructors. Because we will use Lombok to generate these.</p><ol><li>If you need to generate get, set methods, add @Data annotations to the class definition</li><li>If you need to generate a constituent function, use the annotation of the corresponding constructor. In this example, we construct a constructor that includes all attributes, then add @AllArgsConstructor</li></ol><p>The completed code is as follows:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Todo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Second, letâ€™s create a new RESTful service class, named: TodoApi. It will return all Todo (Resources) lists. The code is as follows:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/todo"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoApi</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Todo&gt; <span class="title">getTodoList</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Todo&gt; todos = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        todos.add(<span class="keyword">new</span> Todo(<span class="number">1</span>, <span class="string">"Call Meeting"</span>, <span class="string">""</span>));</span><br><span class="line">        todos.add(<span class="keyword">new</span> Todo(<span class="number">2</span>, <span class="string">"Print file"</span>, <span class="string">""</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> todos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Here, we map the method to the URL â€œ/todoâ€ and construct Todo data for two examples. If the error â€œTodo does not specify the composition methodâ€ appears after joining this program, you can refer to <a href="/java/howto-enable-lombok-annotations-in-idea/" title="How to enable lombok annotations in IDEA IDE">How to enable lombok annotations in IDEA IDE</a> to solve</p><p>Now, run the program and visit the address</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localhost:8080/todo</span><br></pre></td></tr></table></figure><p>, you can see that the Todo list is assembled into a json data format and returned.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"title"</span>:<span class="string">"Call Metting"</span>,<span class="attr">"desc"</span>:<span class="string">""</span>&#125;,&#123;<span class="attr">"id"</span>:<span class="number">2</span>,<span class="attr">"title"</span>:<span class="string">"Print File"</span>,<span class="attr">"desc"</span>:<span class="string">""</span>&#125;]</span><br></pre></td></tr></table></figure><h2 id="Next-Step"><a href="#Next-Step" class="headerlink" title="Next Step"></a>Next Step</h2><p>In next post, we will add database functionality to the application.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;This is a step by step tutorail for beginner, you can learn how to use spring boot to build a restful service (api). And we also show you: how to connect DB with spring data, how to validate user input with hibernate validation, and how to document your api (restful service) with Swagger.&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.mls-tech.info/categories/java/"/>
    
      <category term="SpringBoot" scheme="https://www.mls-tech.info/categories/java/springboot/"/>
    
    
      <category term="java" scheme="https://www.mls-tech.info/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>How to skip the test when maven builds</title>
    <link href="https://www.mls-tech.info/java/howto-skip-test-maven-build/"/>
    <id>https://www.mls-tech.info/java/howto-skip-test-maven-build/</id>
    <published>2022-01-24T11:51:45.000Z</published>
    <updated>2022-01-24T11:55:33.655Z</updated>
    
    <content type="html"><![CDATA[<p>Maven is the most popular project building tool for the Java platform, and the test-driven development (TDD) is also the development method chosen by many teams in Java platform project development. But when building a project with maven, if for some reason, we want not to perform unit tests in this build. So what to do?</p><a id="more"></a><h2 id="Solutions"><a href="#Solutions" class="headerlink" title="Solutions"></a>Solutions</h2><p>There are two command-line arguments that help us prevent maven from performing unit tests while building the project:</p><ol><li>skipTests, such as:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn -DskipTests build</span><br></pre></td></tr></table></figure><ol start="2"><li>maven.test.skip=trueï¼Œ such as:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn -Dmaven.test.skip=<span class="literal">true</span> build</span><br></pre></td></tr></table></figure><h2 id="The-difference-between-the-two-parameters"><a href="#The-difference-between-the-two-parameters" class="headerlink" title="The difference between the two parameters"></a>The difference between the two parameters</h2><p>-DskipTestsï¼ŒThe test case is not executed, but the test case class is compiled to generate the corresponding class file under target/test-classes.</p><p>-Dmaven.test.skip=trueï¼ŒTest cases are not executed, and test case classes are not compiled.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Maven is the most popular project building tool for the Java platform, and the test-driven development (TDD) is also the development method chosen by many teams in Java platform project development. But when building a project with maven, if for some reason, we want not to perform unit tests in this build. So what to do?&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.mls-tech.info/categories/java/"/>
    
    
      <category term="java" scheme="https://www.mls-tech.info/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>SwiftUI Widget - ZStack</title>
    <link href="https://www.mls-tech.info/app/swift/swiftui-widget-zstack/"/>
    <id>https://www.mls-tech.info/app/swift/swiftui-widget-zstack/</id>
    <published>2022-01-23T04:13:31.000Z</published>
    <updated>2022-01-23T05:58:20.064Z</updated>
    
    <content type="html"><![CDATA[<p>The function of ZStack is to layer the widget on top of each other. Widget stacked on top cover the visible portion of the widget stacked below and those widgets can be aligned in both axes.</p><a id="more"></a><h2 id="How-to-layer-a-text-on-a-shape"><a href="#How-to-layer-a-text-on-a-shape" class="headerlink" title="How to layer a text on a shape"></a>How to layer a text on a shape</h2><p>Letâ€™s look at a code snippet</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ZStackView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span>() &#123;</span><br><span class="line">            <span class="type">Circle</span>()</span><br><span class="line">            .frame(width: <span class="number">100</span>, height: <span class="number">100</span>)</span><br><span class="line">                                  .foregroundColor(.green)</span><br><span class="line"></span><br><span class="line">            <span class="type">Text</span>(<span class="string">"Hello"</span>)</span><br><span class="line">                .foregroundColor(.white)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In this example, we layer a Text - â€˜Helloâ€™ on a Circle. Becuase the default alignment is center, you can see the Text in center of the Circle.</p><h2 id="How-to-align-those-widgets-in-ZStack"><a href="#How-to-align-those-widgets-in-ZStack" class="headerlink" title="How to align those widgets in ZStack"></a>How to align those widgets in ZStack</h2><p>You can use the â€˜alignmentâ€™ property to do it. such as:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ZStackView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span>(alignment: .bottomLeading) &#123;</span><br><span class="line">            <span class="type">Circle</span>()</span><br><span class="line">            .frame(width: <span class="number">100</span>, height: <span class="number">100</span>)</span><br><span class="line">                                  .foregroundColor(.green)</span><br><span class="line"></span><br><span class="line">            <span class="type">Text</span>(<span class="string">"Hello"</span>)</span><br><span class="line">                .foregroundColor(.white)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>This will align both widgets to the lower-left corner. We didnâ€™t set the frame for the entire ZStack, ZStack will use the frame of the circle, So we can only see that text is aligned.</p><p>To see the both widgets(Circle and Text) are aligned. We change the code as:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ZStackView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">ZStack</span>(alignment: .bottomLeading) &#123;</span><br><span class="line">            <span class="type">Circle</span>()</span><br><span class="line">            .frame(width: <span class="number">100</span>, height: <span class="number">100</span>)</span><br><span class="line">                                  .foregroundColor(.green)</span><br><span class="line"></span><br><span class="line">            <span class="type">Text</span>(<span class="string">"Hello"</span>)</span><br><span class="line">                .foregroundColor(.white)</span><br><span class="line">        &#125;</span><br><span class="line">        .frame(width: <span class="number">300</span>, height: <span class="number">300</span>, alignment: .bottomLeading)</span><br><span class="line">        .background(<span class="type">Color</span>.gray)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Now you can see the both widgets are aligned to bottom left corner.</p><p>About more detail of ZStack widget, you can see the <a href="https://developer.apple.com/documentation/swiftui/zstack" rel="external nofollow noopener noreferrer" target="_blank">Official Documentation</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;The function of ZStack is to layer the widget on top of each other. Widget stacked on top cover the visible portion of the widget stacked below and those widgets can be aligned in both axes.&lt;/p&gt;
    
    </summary>
    
      <category term="App Development" scheme="https://www.mls-tech.info/categories/app/"/>
    
      <category term="Swift" scheme="https://www.mls-tech.info/categories/app/swift/"/>
    
    
      <category term="ç§»åŠ¨å¼€å‘" scheme="https://www.mls-tech.info/tags/app/"/>
    
      <category term="Swift" scheme="https://www.mls-tech.info/tags/swift/"/>
    
  </entry>
  
  <entry>
    <title>SwiftUI Widget - NavigationView</title>
    <link href="https://www.mls-tech.info/app/swift/swiftui-widget-navigationview/"/>
    <id>https://www.mls-tech.info/app/swift/swiftui-widget-navigationview/</id>
    <published>2022-01-23T00:52:17.000Z</published>
    <updated>2022-01-23T06:05:01.024Z</updated>
    
    <content type="html"><![CDATA[<p>NavigationView is probably onte of the most commonly used SwiftUI widget, and is used by almost all SwiftUI apps.</p><a id="more"></a><h2 id="SwiftUI-Widget-NavigationView"><a href="#SwiftUI-Widget-NavigationView" class="headerlink" title="SwiftUI Widget: NavigationView"></a>SwiftUI Widget: NavigationView</h2><p>Like UINavigtionViewController in UIkit, NavigationView and NavigationLink provide the function to allow user push and pop screen with ease, presenting information in a clear, hierarchical way for users.</p><p>In this article, we will demostrate the basic functions of NavigationView. we will build three SwiftUI screen to explain the NavigationView and NavigationLink.</p><h2 id="How-to-navigate-from-one-view-to-another-view"><a href="#How-to-navigate-from-one-view-to-another-view" class="headerlink" title="How to navigate from one view to another view"></a>How to navigate from one view to another view</h2><p>Letâ€™s look at a code snippet</p><p>First, in ContentView.swift</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ContentView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">NavigationView</span> &#123;</span><br><span class="line">            <span class="type">NavigationLink</span>(destination: <span class="type">SecondView</span>()) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="type">Text</span>(<span class="string">"Second View"</span>)</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Second, in SecondView.swift (You should new a SwiftUI file in XCode)</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SecondView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="type">Text</span>(<span class="string">"Second View"</span>)</span><br><span class="line">            .navigationTitle(<span class="string">"Second"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Now, after running the SwiftUI app, you will see the first screen (ContentView), click the â€œSecond Viewâ€, the screen will be tranfer to SecondView, you should see a title: â€˜Secondâ€™ at the top left corner and the text â€œSecond Viewâ€ in the center of screen.</p><p>Is it the same when using UINavigtionViewController of UIKit?</p><p>Now, we can navigate into third view. Create a new SwiftUI view again.</p><p>thirdview:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ThirdView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">"Third View"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>And change the code of the SecondView</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SecondView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">"Second View"</span>)</span><br><span class="line">            <span class="type">NavigationLink</span>(destination: <span class="type">ThirdView</span>(greeting: <span class="string">"Hello Tom!"</span>)) &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"Third View"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            .navigationTitle(<span class="string">"Second"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Yes, we add a NavigationLink in this SwiftUI view. Now you can push the â€œThird Viewâ€ to navigate the third view.</p><h2 id="How-to-pass-the-parameter-to-the-next-SwiftUI-view"><a href="#How-to-pass-the-parameter-to-the-next-SwiftUI-view" class="headerlink" title="How to pass the parameter to the next SwiftUI view"></a>How to pass the parameter to the next SwiftUI view</h2><p>In SwiftUI, passing the parameters to the next SwiftUi view is very easy.</p><p>Consider: we pass a parameter from Second View to Third View. Firstï¼Œ letâ€™s define a variable to receive the parameters in Third View. Like this:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ThirdView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> greeting: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">"Third View: \(greeting)"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Then, letâ€™s pass the value from the second view.</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SecondView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">VStack</span> &#123;</span><br><span class="line">            <span class="type">Text</span>(<span class="string">"Second View"</span>)</span><br><span class="line">            <span class="type">NavigationLink</span>(destination: <span class="type">ThirdView</span>(greeting: <span class="string">"Hello Tom!"</span>)) &#123;</span><br><span class="line">                <span class="type">Text</span>(<span class="string">"Third View"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">            .navigationTitle(<span class="string">"Second"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>So easy?</p><h2 id="How-to-add-button-to-NavigationBar"><a href="#How-to-add-button-to-NavigationBar" class="headerlink" title="How to add button to NavigationBar"></a>How to add button to NavigationBar</h2><p>Can I add the button to navigationBar? Yes, you can. Like UINavigtionViewController, but more easy.</p><p>Letâ€™s add two buttons to navigationbar of the ThirdView. Change the code of ThirdView as below:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ThirdView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> greeting: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">"Third View: \(greeting)"</span>)</span><br><span class="line">            .navigationBarItems(</span><br><span class="line">                trailing: <span class="type">HStack</span> &#123;</span><br><span class="line">                    <span class="type">Button</span>(<span class="string">"Add"</span>) &#123;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="type">Button</span>(<span class="string">"Sub"</span>) &#123;</span><br><span class="line">                    &#125;&#125;</span><br><span class="line">            )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>If you run the SwiftUI app, you can see two buttons at top right corner of ThirdView. But, when you push the button, no action is executed. Because we have writen any code for the action in the button event.</p><p>Now, letâ€™s add some action:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ThirdView</span>: <span class="title">View</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    @<span class="type">State</span> <span class="keyword">var</span> greeting: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> body: some <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">Text</span>(<span class="string">"Third View: \(greeting)"</span>)</span><br><span class="line">            .navigationBarItems(</span><br><span class="line">                trailing: <span class="type">HStack</span> &#123;</span><br><span class="line">                    <span class="type">Button</span>(<span class="string">"Add"</span>) &#123;</span><br><span class="line">                        <span class="keyword">self</span>.greeting = <span class="string">"Add"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="type">Button</span>(<span class="string">"Sub"</span>) &#123;</span><br><span class="line">                        <span class="keyword">self</span>.greeting = <span class="string">"Sub"</span></span><br><span class="line">                    &#125;&#125;</span><br><span class="line">            )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>About more detail of NavigationView widget, you can see the <a href="https://developer.apple.com/documentation/swiftui/navigationview" rel="external nofollow noopener noreferrer" target="_blank">Official Documentation</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;NavigationView is probably onte of the most commonly used SwiftUI widget, and is used by almost all SwiftUI apps.&lt;/p&gt;
    
    </summary>
    
      <category term="App Development" scheme="https://www.mls-tech.info/categories/app/"/>
    
      <category term="Swift" scheme="https://www.mls-tech.info/categories/app/swift/"/>
    
    
      <category term="ç§»åŠ¨å¼€å‘" scheme="https://www.mls-tech.info/tags/app/"/>
    
      <category term="Swift" scheme="https://www.mls-tech.info/tags/swift/"/>
    
  </entry>
  
  <entry>
    <title>How to deploy vue app with docker (Base on Nginx Image)</title>
    <link href="https://www.mls-tech.info/docker/how-to-deploy-vue-app-with-docker/"/>
    <id>https://www.mls-tech.info/docker/how-to-deploy-vue-app-with-docker/</id>
    <published>2022-01-22T02:15:51.000Z</published>
    <updated>2022-01-22T03:02:49.719Z</updated>
    
    <content type="html"><![CDATA[<p>This article simply demonstrates how to deploy a Vue-developed front-end app using Docker.</p><a id="more"></a><p>A Vue application is made up of a set of static files, so we only need to publish it as a static resource to a web server.</p><p>In this case, we chose to use Nginx as a static web server and publish the Vue app to Nginx as static content.</p><h2 id="Pull-and-configure-the-Nginx-image"><a href="#Pull-and-configure-the-Nginx-image" class="headerlink" title="Pull and configure the Nginx image"></a>Pull and configure the Nginx image</h2><p>Execute in the terminal</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search nginx</span><br></pre></td></tr></table></figure><p>You can see that there are many images associated with nginx, you can also search Nginx image in <a href="https://hub.docker.com" rel="external nofollow noopener noreferrer" target="_blank">Docker Hub Website</a>. In Docker Hub, you can more details of image, such as: Use Guide, Quick reference and Tag, etc.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">NAME                               DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">nginx                              Official build of Nginx.                        13374               [OK]</span><br><span class="line">jwilder/nginx-proxy                Automated Nginx reverse proxy <span class="keyword">for</span> docker conâ€¦   1828                                    [OK]</span><br><span class="line">richarvey/nginx-php-fpm            Container running Nginx + PHP-FPM capable ofâ€¦   778                                     [OK]</span><br><span class="line">linuxserver/nginx                  An Nginx container, brought to you by LinuxSâ€¦   117</span><br><span class="line">bitnami/nginx                      Bitnami nginx Docker Image                      85                                      [OK]</span><br><span class="line">tiangolo/nginx-rtmp                Docker image with Nginx using the nginx-rtmpâ€¦   78                                      [OK]</span><br><span class="line">.....</span><br></pre></td></tr></table></figure><p>We select the official docker image, execute:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx</span><br></pre></td></tr></table></figure><p>Once the pull is complete, it can be viewed through docker images, it is about 132M in size.</p><p>After the pull is complete, you can execute the following command to start the nginx container:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name nginx -d -p 80:80 nginx</span><br></pre></td></tr></table></figure><p>After execution is complete, you can use a browser to browse localhost, and the default page of nginx can be displayed.</p><p>Next, letâ€™s log in to the docker container to check some of the default configurations of the nginx image. Execute the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it nginx /bin/bash</span><br></pre></td></tr></table></figure><p>After execution, the current terminal immediately enters the nginx container environment, in /etc/nginx you can find the corresponding configuration file of nginx, open the /etc/nginx/conf.d/default.conf file, you can see that the current default root directory is /uar/share/nginx/html.</p><p>You can change this configuration or even add a new web host (web).</p><p>In this exercise we use the default configuration and do not modify it.</p><h2 id="Package-the-Vue-app"><a href="#Package-the-Vue-app" class="headerlink" title="Package the Vue app"></a>Package the Vue app</h2><p>Go to the project directory of the Vue app and execute:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm build</span><br></pre></td></tr></table></figure><p>Or</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn build</span><br></pre></td></tr></table></figure><p>vue-cli starts helping us build the final front-end app distribution package.<strong>If the front-end application needs to access the API services of the backend, modify the relevant configuration information in the application mainly before building</strong></p><p>After the execution is completed, all the resources related to the application distribution are packaged and placed in the dist directory.</p><p>For more details about deployment with vue-cli, you can see the <a href="https://cli.vuejs.org/guide/deployment.html#general-guidelines" rel="external nofollow noopener noreferrer" target="_blank">Vue-Cli Guide</a></p><h2 id="Deploy-vue-app-with-docker"><a href="#Deploy-vue-app-with-docker" class="headerlink" title="Deploy vue app with docker"></a>Deploy vue app with docker</h2><p>After the above steps, we are ready to build a Docker image of the front-end application.</p><p>First, prepare the Dockerfile file.</p><p>Create a new file named Dockerfile in the project directory of vue, which reads as follows:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx</span><br><span class="line"></span><br><span class="line">COPY dist/ /usr/share/nginx/html/</span><br></pre></td></tr></table></figure><p>The file is as simple as starting with the nginx image and copying the contents of the dist directory to the /usr/share/nginx/html/ directory of the new image.</p><p>After saving, execute the following command to build the image:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t vue-web-app:1.0.0 .</span><br></pre></td></tr></table></figure><p><strong>Notice: the â€œ.â€ sign at the end of the command (representing the current directory)</strong></p><p>After the build, you can see the new image we created through the docker images.</p><p>To start the container, you can execute:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name vue-app -d -p 8090:80 vue-web-app:1.0.0</span><br></pre></td></tr></table></figure><p>It can then be accessed through a browser:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:80990/</span><br></pre></td></tr></table></figure><p>You can see the result of the vue app running.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;This article simply demonstrates how to deploy a Vue-developed front-end app using Docker.&lt;/p&gt;
    
    </summary>
    
      <category term="Docker" scheme="https://www.mls-tech.info/categories/docker/"/>
    
    
      <category term="Docker" scheme="https://www.mls-tech.info/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>How to build Rest Service with Spring Boot - A Step by Step Tutorial for Beginner - 5</title>
    <link href="https://www.mls-tech.info/java/springboot-rest-api-tutorial-5-en/"/>
    <id>https://www.mls-tech.info/java/springboot-rest-api-tutorial-5-en/</id>
    <published>2022-01-21T01:00:49.000Z</published>
    <updated>2022-01-21T01:16:30.671Z</updated>
    
    <content type="html"><![CDATA[<p>In the <a href="/java/springboot-rest-api-tutorial-4-en/" title="How to build Rest Service with Spring Boot - A Step by Step Tutorial for Beginner - 4">How to build Rest Service with Spring Boot - A Step by Step Tutorial for Beginner - 4</a> of this series , I will show you how to validate the data entered by the Restful service interface in Spring Boot. This article will go deeper and demonstrate how to use Swagger to generate documentation for a Restful service interface and test the API with pages generated by Swagger.</p><a id="more"></a><p>In microservice development, each microservice developer needs to provide API documents to consumers, and traditionally uses Word documents. But the more prone problems with Word documents are:</p><ol><li>The documentation and code are not synchronized or there are multiple versions of the document, so that I see the document and donâ€™t know how to use it?</li><li>You canâ€™t test the API on a web page, but you need to install some tools to test it, especially for APIs that are not GET methods</li></ol><p>Swagger solves the above problems, and Spring Boot provides a very simple way to integrate the concrete implementation of Swagger. Letâ€™s take you to experience it:</p><h2 id="Basic-settings"><a href="#Basic-settings" class="headerlink" title="Basic settings"></a>Basic settings</h2><p>Add dependency libraries, modify pom.xml files</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Swagger --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- End Swagger --&gt;</span></span><br></pre></td></tr></table></figure><p>Then create a new Configuration Class for Spring Boot to configure Swagger. The code is as follows:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerCofnig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">apis</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addResourceHandler(<span class="string">"swagger-ui.html"</span>)</span><br><span class="line">                .addResourceLocations(<span class="string">"classpath:/META-INF/resources/"</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">"/webjars/**"</span>)</span><br><span class="line">                .addResourceLocations(<span class="string">"classpath:/META-INF/resources/webjars/"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Finally, add a new annotation @@EnableSwagger2 to the appâ€™s startup class, as follows:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(TodoApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Now, running the program and accessing</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/v2/api-docs</span><br></pre></td></tr></table></figure><p>, we can get the API description that Swagger generated for the application, json format:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"swagger"</span>: <span class="string">"2.0"</span>,</span><br><span class="line"><span class="attr">"info"</span>: &#123;</span><br><span class="line"><span class="attr">"description"</span>: <span class="string">"Api Documentation"</span>,</span><br><span class="line"><span class="attr">"version"</span>: <span class="string">"1.0"</span>,</span><br><span class="line"><span class="attr">"title"</span>: <span class="string">"Api Documentation"</span>,</span><br><span class="line"><span class="attr">"termsOfService"</span>: <span class="string">"urn:tos"</span>,</span><br><span class="line"><span class="attr">"contact"</span>: &#123;&#125;,</span><br><span class="line"><span class="attr">"license"</span>: &#123;</span><br><span class="line"><span class="attr">"name"</span>: <span class="string">"Apache 2.0"</span>,</span><br><span class="line"><span class="attr">"url"</span>: <span class="string">"http://www.apache.org/licenses/LICENSE-2.0"</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">"host"</span>: <span class="string">"localhost:8080"</span>,</span><br><span class="line"><span class="attr">"basePath"</span>: <span class="string">"/"</span>,</span><br><span class="line"><span class="attr">"tags"</span>: [&#123;</span><br><span class="line"><span class="attr">"name"</span>: <span class="string">"basic-error-controller"</span>,</span><br><span class="line"><span class="attr">"description"</span>: <span class="string">"Basic Error Controller"</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line"><span class="attr">"name"</span>: <span class="string">"todo-api"</span>,</span><br><span class="line"><span class="attr">"description"</span>: <span class="string">"Todo Api"</span></span><br><span class="line">&#125;],</span><br><span class="line"><span class="attr">"paths"</span>: &#123;</span><br><span class="line">            ...</span><br><span class="line">            "/todo": &#123;</span><br><span class="line">"get": &#123;</span><br><span class="line">"tags": ["todo-api"],</span><br><span class="line">"summary": "getTodoList",</span><br><span class="line">"operationId": "getTodoListUsingGET",</span><br><span class="line">"produces": ["*/*"],</span><br><span class="line">"responses": &#123;</span><br><span class="line">"200": &#123;</span><br><span class="line">"description": "OK",</span><br><span class="line">"schema": &#123;</span><br><span class="line">"$ref": "#/definitions/ApiResult"</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">"401": &#123;</span><br><span class="line">"description": "Unauthorized"</span><br><span class="line">&#125;,</span><br><span class="line">"403": &#123;</span><br><span class="line">"description": "Forbidden"</span><br><span class="line">&#125;,</span><br><span class="line">"404": &#123;</span><br><span class="line">"description": "Not Found"</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">"post": &#123;</span><br><span class="line">"tags": ["todo-api"],</span><br><span class="line">"summary": "addTodo",</span><br><span class="line">"operationId": "addTodoUsingPOST",</span><br><span class="line">"consumes": ["application/json"],</span><br><span class="line">"produces": ["*/*"],</span><br><span class="line">"parameters": [&#123;</span><br><span class="line">"in": "body",</span><br><span class="line">"name": "todo",</span><br><span class="line">"description": "todo",</span><br><span class="line">"required": true,</span><br><span class="line">"schema": &#123;</span><br><span class="line">"$ref": "#/definitions/Todo"</span><br><span class="line">&#125;</span><br><span class="line">&#125;],</span><br><span class="line">        &#125;,</span><br><span class="line">        ...</span><br></pre></td></tr></table></figure><p>Because there are more contents, I will not list them all here. However, as you can see, Swagger not only generates the API description of the application, but also the description of the default system API for Spring Boot.</p><p>Of course, viewing in json is too cumbersome for developers. Is there a better way to check it out?</p><p>Visit localhost:8080/swagger-ui.html and youâ€™ll see beautiful documentation.</p><p><img src="/images/java/spring/swagger-api-1.png" alt="API Documentation that Swagger generated"></p><p>Expand â€˜todo-apiâ€™ node</p><p><img src="/images/java/spring/swagger-api-2.png" alt="API Documentation that Swagger generated"></p><p>There are also models used in the API that also generate documentation, which is very cool.</p><p><img src="/images/java/spring/swagger-api-3.png" alt="API Documentation that Swagger generated"></p><h2 id="Only-the-API-of-the-application-itself-is-generated"><a href="#Only-the-API-of-the-application-itself-is-generated" class="headerlink" title="Only the API of the application itself is generated"></a>Only the API of the application itself is generated</h2><p>After reading the documentation output by Swagger above, including the API of the Spring Boot framework, but also including the applicationâ€™s own API, it looks a bit messy, and usually we donâ€™t care about the frameworkâ€™s API, can we limit the API that only generates the application itself? Of course, this can be achieved by modifying the configuration information of Swagger.</p><p>Open the configuration class SwaggerCofnig .java, call the select method after generating the Docket object to filter, below we filter by the package name and URL path name:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Docket <span class="title">apis</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">            .select()</span><br><span class="line">            .apis(RequestHandlerSelectors.basePackage(<span class="string">"cn.com.hohistar.tutorial.springboot.starter"</span>))</span><br><span class="line">            .paths(regex(<span class="string">"/todo.*"</span>))</span><br><span class="line">            .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>After modifying it, run the program again and open the URL:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/swagger-ui.html</span><br></pre></td></tr></table></figure><p><img src="/images/java/spring/swagger-api-4.png" alt="API Documentation that Swagger generated"></p><p>As you can see, only the API and related models of the app are left.</p><h2 id="Test-the-API"><a href="#Test-the-API" class="headerlink" title="Test the API"></a>Test the API</h2><p>In fact, with the HTML page generated by Swagger, we can not only view the information of the API, but also test the API on the page ourselves, which is simply inconvenient! In the past, this was solved with curl and Postman.</p><p><img src="/images/java/spring/swagger-api-5.png" alt="Test Api with Swagger UI"></p><h2 id="Add-App-Information"><a href="#Add-App-Information" class="headerlink" title="Add App Information"></a>Add App Information</h2><p>Now, letâ€™s change the app information in the Swagger build page. Or modify the Swagger configuration class to include contact and app information.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger</span>2</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerCofnig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Contact DEFAULT_CONTACT = <span class="keyword">new</span> Contact(</span><br><span class="line">            <span class="string">"Jini"</span>, <span class="string">"https://www.mls-tech.info"</span>, <span class="string">"mls-tech@qq.com"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ApiInfo DEFAULT_API_INFO = <span class="keyword">new</span> ApiInfoBuilder()</span><br><span class="line">            .title(<span class="string">"Todo API"</span>)</span><br><span class="line">            .description(<span class="string">"Spring Boot Getting Start - Todo API"</span>)</span><br><span class="line">            .version(<span class="string">"1.0.0"</span>)</span><br><span class="line">            .license(<span class="string">"Apache License Version 2.0"</span>)</span><br><span class="line">            .licenseUrl(<span class="string">"https://www.apache.org/licenses/LICENSE-2.0"</span>)</span><br><span class="line">            .contact(DEFAULT_CONTACT)</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">apis</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                .select()</span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">"cn.com.hohistar.tutorial.springboot.starter"</span>))</span><br><span class="line">                .paths(regex(<span class="string">"/todo.*"</span>))</span><br><span class="line">                .build()</span><br><span class="line">                .apiInfo(DEFAULT_API_INFO);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addResourceHandler(<span class="string">"swagger-ui.html"</span>)</span><br><span class="line">                .addResourceLocations(<span class="string">"classpath:/META-INF/resources/"</span>);</span><br><span class="line">        registry.addResourceHandler(<span class="string">"/webjars/**"</span>)</span><br><span class="line">                .addResourceLocations(<span class="string">"classpath:/META-INF/resources/webjars/"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The key change is in line 24 of the code, where custom application information is added for Docket. The running result is shown in the following figure:</p><p><img src="/images/java/spring/swagger-api-6.png" alt="Test Api with Swagger UI"></p><h2 id="Add-information-to-interfaces-and-models"><a href="#Add-information-to-interfaces-and-models" class="headerlink" title="Add information to interfaces and models"></a>Add information to interfaces and models</h2><p>If we also want to provide some additional instructions for the API or related Models, this Swagger also provides support:</p><ol><li>Add api descriptions, open TodoApi .java files, and add @ApiOperation annotations to the method definitions.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span></span><br><span class="line"><span class="meta">@ApiOperation</span>(value = <span class="string">"add a todo"</span>, notes = <span class="string">"åœ¨æ–°å¢æ—¶ï¼Œidæ˜¯ä¸éœ€è¦çš„ï¼Œtitle is requried."</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ApiResult <span class="title">addTodo</span><span class="params">(@Valid @RequestBody Todo todo)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ApiResult.ApiResultBuilder builder = ApiResult.builder().succ(<span class="keyword">false</span>).build().toBuilder();</span><br><span class="line"></span><br><span class="line">    todoBiz.addTodo(todo);</span><br><span class="line"></span><br><span class="line">    builder.succ(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> builder.build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>Add a Model description, open a Todo .java file, add an @ApiModel annotation to the class definition, and add an ApiModelProperty annotation to the attribute that requires a description</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@ApiModel</span>(description = <span class="string">"All details about the Todo."</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Todo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy=GenerationType.AUTO)</span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(notes = <span class="string">"å”¯ä¸€ç¼–ç ï¼Œæœ‰ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ"</span>)</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="meta">@ApiModelProperty</span>(notes = <span class="string">"title is required."</span>)</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Start the program again and you can see the newly added instructions.</p><p><img src="/images/java/spring/swagger-api-7.png" alt="Test Api with Swagger UI"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;In the &lt;a href=&quot;/java/springboot-rest-api-tutorial-4-en/&quot; title=&quot;How to build Rest Service with Spring Boot - A Step by Step Tutorial for Beginner - 4&quot;&gt;How to build Rest Service with Spring Boot - A Step by Step Tutorial for Beginner - 4&lt;/a&gt; of this series , I will show you how to validate the data entered by the Restful service interface in Spring Boot. This article will go deeper and demonstrate how to use Swagger to generate documentation for a Restful service interface and test the API with pages generated by Swagger.&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.mls-tech.info/categories/java/"/>
    
      <category term="SpringBoot" scheme="https://www.mls-tech.info/categories/java/springboot/"/>
    
    
      <category term="java" scheme="https://www.mls-tech.info/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>How to Simple configuration the Log in Spring Boot</title>
    <link href="https://www.mls-tech.info/java/spring-boot-setup-simple-log/"/>
    <id>https://www.mls-tech.info/java/spring-boot-setup-simple-log/</id>
    <published>2022-01-20T08:45:36.000Z</published>
    <updated>2022-01-20T08:48:35.422Z</updated>
    
    <content type="html"><![CDATA[<p>When building a project using <a href="https://start.spring.io" rel="external nofollow noopener noreferrer" target="_blank">https://start.spring.io</a> the template provided by [Spring Start], the dependencies required for logging are already built into it. To use logs, all you need is a simple configuration.</p><p>Open the projectâ€™s applications.yaml file and add the appropriate configuration options to it. as:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">WARN</span></span><br><span class="line">    <span class="attr">org:</span></span><br><span class="line">      <span class="attr">springframework:</span></span><br><span class="line">        <span class="attr">web:</span> <span class="string">DEBUG</span></span><br><span class="line">    <span class="attr">info:</span></span><br><span class="line">      <span class="attr">mlstech:</span></span><br><span class="line">        <span class="attr">api:</span> <span class="string">DEBUG</span></span><br></pre></td></tr></table></figure><p>In the above settings, the overall log base is set to WARN, and the log level of different packages is set according to the needs of development and debugging.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;When building a project using &lt;a href=&quot;https://start.spring.io&quot; rel=&quot;external nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&gt;https://start
      
    
    </summary>
    
      <category term="java" scheme="https://www.mls-tech.info/categories/java/"/>
    
      <category term="SpringBoot" scheme="https://www.mls-tech.info/categories/java/springboot/"/>
    
    
      <category term="java" scheme="https://www.mls-tech.info/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot Web Application Example with JSP(Update to Spring Boot 2.6 and Java 17)</title>
    <link href="https://www.mls-tech.info/java/spring-boot-web-application-with-jsp/"/>
    <id>https://www.mls-tech.info/java/spring-boot-web-application-with-jsp/</id>
    <published>2022-01-19T11:46:19.000Z</published>
    <updated>2022-01-25T11:41:28.113Z</updated>
    
    <content type="html"><![CDATA[<p>This article uses a simple example to demonstrate: How to build a spring boot web applicaiton with JSP.</p><a id="more"></a><h2 id="Why-use-the-JSP-in-Spring-Boot-Web-Application"><a href="#Why-use-the-JSP-in-Spring-Boot-Web-Application" class="headerlink" title="Why use the JSP in Spring Boot Web Application"></a>Why use the JSP in Spring Boot Web Application</h2><p>As a relatively obsolete technologyï¼ŒBy default, the JSP is not used as a template for web page rendering in Spring Boot 2, However, in the face of some old system upgrades written in JSP, you may also want to be able to configure support for JSP.</p><p>Next, letâ€™s build a Spring Boot Web Application from scratch and then add support for JSPs.</p><p>For the detail of operation, we also provide a voide tutorial in youtube, you can watch it.</p><div class="owl-media owl-video owl-youtube"><iframe src="//www.youtube.com/embed/6ON3zKDXdOc" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div><h2 id="Generate-a-Spring-Boot-Web-Application-Example"><a href="#Generate-a-Spring-Boot-Web-Application-Example" class="headerlink" title="Generate a Spring Boot Web Application Example"></a>Generate a Spring Boot Web Application Example</h2><p>First, in <a href="https://start.spring.io/" rel="external nofollow noopener noreferrer" target="_blank">Spring Boot Starter</a>, fill in the basic configuration information for the project.</p><p>Depending on the objectives of the experiment, we chose to use maven as the build tool, Java as the programming language, Select the current stable version for Spring Boot, and Spring Web Starter as the support package.</p><h2 id="Add-JSP-Dependency"><a href="#Add-JSP-Dependency" class="headerlink" title="Add JSP Dependency"></a>Add JSP Dependency</h2><p>To support JSP, We need to add the JSP parser in project. In this example, we choose tomcat-embed-jasper library.</p><p>Add tomcat-embed-jasper library in pom.xml file, The final pom file is as follows:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>info.mls-tech<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-web-jsp-with-jsp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>spring-boot-web-with-jsp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot Web Application with JSP<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-jasper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Create-a-Spring-MVC-Controller"><a href="#Create-a-Spring-MVC-Controller" class="headerlink" title="Create a Spring MVC Controller"></a>Create a Spring MVC Controller</h2><p>In Spring Boot Web Application, each HTTP request can be configured to respond with a corresponding method in the Controller. In this case, we built a Controller to respond to the root and â€˜helloâ€™ path.</p><p>Create a new package named controller and create a new class in the package named HelloController, as follows:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(&#123;<span class="string">"/"</span>, <span class="string">"/hello"</span>&#125;)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">(Model model, @RequestParam(value=<span class="string">"name"</span>, required=<span class="keyword">false</span>, defaultValue=<span class="string">"World"</span>)</span> String name) </span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">"name"</span>, name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>About the more information about spring mvc controller, you can refer the <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-controller" rel="external nofollow noopener noreferrer" target="_blank">Offical Documentation</a></p><h2 id="Create-a-JSP-page"><a href="#Create-a-JSP-page" class="headerlink" title="Create a JSP page"></a>Create a JSP page</h2><p>Create a new webapp directory in the src/main directory, and then create a WEB-INF/jsp directory in the webapp directory. Finally, create a file named hello.jsp in the jsp directory, which content as follows:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello $&#123;name&#125;!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello $&#123;name&#125;!<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Configure-JSP-view"><a href="#Configure-JSP-view" class="headerlink" title="Configure JSP view"></a>Configure JSP view</h2><p>Rename the application.properties file in src/main/resources: application.yml, and add the following:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">view:</span></span><br><span class="line">      <span class="attr">prefix:</span> <span class="string">/WEB-INF/jsp/</span></span><br><span class="line">      <span class="attr">suffix:</span> <span class="string">.jsp</span></span><br></pre></td></tr></table></figure><h2 id="Run-Web-Application"><a href="#Run-Web-Application" class="headerlink" title="Run Web Application"></a>Run Web Application</h2><p>Run the Web Application</p><p>If you run it in console, you can execute:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn spring-boot:run</span><br></pre></td></tr></table></figure><p>If you use IDE tools, you can call maven in the IDE menu to run the application.</p><p>After the application is running, you can access the following URL via your browse.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/hello?name=tom</span><br></pre></td></tr></table></figure><p>You can see something like this in your browser</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello tom!</span><br></pre></td></tr></table></figure><h2 id="Download-the-Code"><a href="#Download-the-Code" class="headerlink" title="Download the Code"></a>Download the Code</h2><p>You can download the completed code from <a href="https://github.com/MaxM2013/spring-boot-web-application-example-with-jsp" rel="external nofollow noopener noreferrer" target="_blank">GitHub</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;This article uses a simple example to demonstrate: How to build a spring boot web applicaiton with JSP.&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.mls-tech.info/categories/java/"/>
    
      <category term="SpringBoot" scheme="https://www.mls-tech.info/categories/java/springboot/"/>
    
    
      <category term="java" scheme="https://www.mls-tech.info/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>How to build Rest Service with Spring Boot - A Step by Step Tutorial for Beginner - 4</title>
    <link href="https://www.mls-tech.info/java/springboot-rest-api-tutorial-4-en/"/>
    <id>https://www.mls-tech.info/java/springboot-rest-api-tutorial-4-en/</id>
    <published>2022-01-19T04:24:19.000Z</published>
    <updated>2022-01-21T01:17:02.240Z</updated>
    
    <content type="html"><![CDATA[<p>In <a href="/java/springboot-rest-api-tutorial-3-en/" title="the previous article">the previous article</a> of the series, I will show you how to format the data returned by the Restful service interface in Spring Boot. This article will continue in depth and demonstrate how to verify the validity of the entered data.</p><a id="more"></a><p>User input data validation is a task that must be completed by the server-side system, and Spring Boot has built-in support for [JSR 303 Bean Validation] (<a href="https://beanvalidation.org/1.0/spec/)" rel="external nofollow noopener noreferrer" target="_blank">https://beanvalidation.org/1.0/spec/)</a>, which together with minimal programming (AOP) makes the task of data validation very simple.</p><h2 id="Add-validation-logic"><a href="#Add-validation-logic" class="headerlink" title="Add validation logic"></a>Add validation logic</h2><p>First, we implement a simple validation rule with validation annotations supported by JSR 303: title cannot be empty.</p><p>To implement this rule, you only need to add annotations to the corresponding properties of the entity class, as follows:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Todo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy=GenerationType.AUTO)</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>As you can see, weâ€™ve annotated @NotNull on the title property of the Todo class to limit that property from being null. <strong>Note that here the empty and empty strings are two different annotations</strong></p><p>After you have changed it, run the program, access this API in Postman, and enter the following parameters in the body:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"desc"</span>:<span class="string">"desc of task 1"</span>&#125;</span><br></pre></td></tr></table></figure><p>Get the following return:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"timestamp"</span>: <span class="string">"2019-07-16T01:27:17.388+0000"</span>,</span><br><span class="line">    <span class="attr">"status"</span>: <span class="number">400</span>,</span><br><span class="line">    <span class="attr">"error"</span>: <span class="string">"Bad Request"</span>,</span><br><span class="line">    <span class="attr">"errors"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"codes"</span>: [</span><br><span class="line">                <span class="string">"NotNull.todo.title"</span>,</span><br><span class="line">                <span class="string">"NotNull.title"</span>,</span><br><span class="line">                <span class="string">"NotNull.java.lang.String"</span>,</span><br><span class="line">                <span class="string">"NotNull"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"arguments"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"codes"</span>: [</span><br><span class="line">                        <span class="string">"todo.title"</span>,</span><br><span class="line">                        <span class="string">"title"</span></span><br><span class="line">                    ],</span><br><span class="line">                    <span class="attr">"arguments"</span>: <span class="literal">null</span>,</span><br><span class="line">                    <span class="attr">"defaultMessage"</span>: <span class="string">"title"</span>,</span><br><span class="line">                    <span class="attr">"code"</span>: <span class="string">"title"</span></span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"defaultMessage"</span>: <span class="string">"ä¸èƒ½ä¸ºnull"</span>,</span><br><span class="line">            <span class="attr">"objectName"</span>: <span class="string">"todo"</span>,</span><br><span class="line">            <span class="attr">"field"</span>: <span class="string">"title"</span>,</span><br><span class="line">            <span class="attr">"rejectedValue"</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">"bindingFailure"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"code"</span>: <span class="string">"NotNull"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"message"</span>: <span class="string">"Validation failed for object='todo'. Error count: 1"</span>,</span><br><span class="line">    <span class="attr">"path"</span>: <span class="string">"/todo"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>As you can see, @NotNull is already working. The data was not inserted into the database and an error message was returned - defaultMessage</p><p>[JSR 303 Bean Validation] (<a href="https://beanvalidation.org/1.0/spec/" rel="external nofollow noopener noreferrer" target="_blank">https://beanvalidation.org/1.0/spec/</a>) provides a number of ready-made verification rules, you can refer to its official documentation.</p><h2 id="Uniform-return-format-for-error"><a href="#Uniform-return-format-for-error" class="headerlink" title="Uniform return format for error"></a>Uniform return format for error</h2><p>Now we can easily use validation rules to verify the data, but the returned error format is the standard format in Spring Boot, and the return format we defined in <a href="/java/springboot-rest-api-tutorial-3-en/" title="previous article">previous article</a>, which will lead to client development needs to use different code for different situations to deal with, which is not conducive to system maintenance. Therefore, we need to convert the format of the returned data.</p><p>Converting error handling in Spring Boot is as simple as adding a handling method to the RestController class, specifically adding a handleException method to The TodoApi and then decorating the method with a @ExceptionHandler annotation indicating that it is used to handle exceptions. The code is as follows:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler</span></span><br><span class="line"><span class="meta">@ResponseStatus</span>(HttpStatus.BAD_REQUEST)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ApiResult <span class="title">handleException</span><span class="params">(MethodArgumentNotValidException exception)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ApiResult.ApiResultBuilder builder = ApiResult.builder().succ(<span class="keyword">false</span>).build().toBuilder();</span><br><span class="line"></span><br><span class="line">    String errorMsg = exception.getBindingResult().getFieldErrors().stream()</span><br><span class="line">            .map(DefaultMessageSourceResolvable::getDefaultMessage)</span><br><span class="line">            .findFirst()</span><br><span class="line">            .orElse(exception.getMessage());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> builder.msg(errorMsg).build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>After running the program after modification and accessing it with Postman, you can find that the information has become our unified format. The client only needs to judge succ to know whether the call was successful, and if not, it takes the information of the msg.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"succ"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"code"</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="string">"Can not null"</span>,</span><br><span class="line">    <span class="attr">"data"</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Use-global-error-handling"><a href="#Use-global-error-handling" class="headerlink" title="Use global error handling"></a>Use global error handling</h2><p>In the above method, we standardize the error handling information by adding methods to the RestController, considering that if there are many RestControllers in the system, it is too cumbersome and not conducive to maintenance, then there is no global<br>What about the unified approach?</p><p>Of course, with Springâ€™s AOP - Facet Programming feature, it is easy to implement and look directly at the code:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Order</span>(Ordered.HIGHEST_PRECEDENCE)</span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RestExceptionHandler</span> <span class="keyword">extends</span> <span class="title">ResponseEntityExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> ResponseEntity&lt;Object&gt; <span class="title">handleMethodArgumentNotValid</span><span class="params">(MethodArgumentNotValidException exception, HttpHeaders headers, HttpStatus status, WebRequest request)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        ApiResult.ApiResultBuilder builder = ApiResult.builder().succ(<span class="keyword">false</span>).build().toBuilder();</span><br><span class="line"></span><br><span class="line">        String errorMsg = exception.getBindingResult().getFieldErrors().stream()</span><br><span class="line">                .map(DefaultMessageSourceResolvable::getDefaultMessage)</span><br><span class="line">                .findFirst()</span><br><span class="line">                .orElse(exception.getMessage());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> handleExceptionInternal(exception, builder.msg(errorMsg).build(), headers, HttpStatus.BAD_REQUEST, request);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In the code, we define a RestExceptionHandler class, which inherits from the ResponseEntityExceptionHandler. ResponseEntityExceptionHandler is a class built into Spring Boot, providing basic methods and mechanisms for handling errors and exceptions, we can override its methods to obtain exception handling capabilities for specific processing procedures, and then insert classes into the rest request process through @ControllerAdvice this AOP annotation.</p><p>With this class, we can delete the handleException that we just added to RestController.</p><p>After modifying it, run the program, access it with Postman, and you can see the same result as the previous section.</p><h2 id="Handle-business-logic-errors"><a href="#Handle-business-logic-errors" class="headerlink" title="Handle business logic errors"></a>Handle business logic errors</h2><p>The above we are through the JSR 303 annotation of the data verification, which is feasible for some relatively simple data verification, but for more complex verification scenarios (such as the need to check the database, according to the query results to determine whether it is correct), JSR303 is a bit inadequate, then it needs to be verified in the business object. In our case, data validation should be done in the TodoBiz class under the biz package. As an example, suppose the title attribute has a restriction that can only be â€œtomâ€. Then we add validation to TodoBizâ€™s business method addTodo as follows:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addTodo</span><span class="params">(Todo todo)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!<span class="string">"tom"</span>.equals(todo.getTitle())) &#123;</span><br><span class="line">        todoRepository.save(todo);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> BizException(<span class="string">"Title can not be tom"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Here, our custom exception class BizException is used to throw exceptions to the presentation layer - RestController. BizException is defined as follows:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BizException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BizException</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(msg, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Note that we inherit runtimeException, which has two benefits:</strong></p><ol><li>There is no need to force the use of try â€¦ in code that uses business classes (in this case, API classes) Catch structure to simplify the code.</li><li>You can trigger Spring Bootâ€™s transaction management mechanism to roll back transactions.</li></ol><p>Then we add method classes to RestExceptionHandler to handle BizException uniformly.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler</span>(&#123;BizException<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">ResponseEntity</span>&lt;<span class="title">Object</span>&gt; <span class="title">handleBizException</span>(<span class="title">BizException</span> <span class="title">e</span>, <span class="title">WebRequest</span> <span class="title">request</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    ApiResult.ApiResultBuilder builder = ApiResult.builder().succ(<span class="keyword">false</span>).build().toBuilder();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ResponseEntity&lt;Object&gt;(builder.msg(e.getMessage()).build(), <span class="keyword">new</span> HttpHeaders(), HttpStatus.OK);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>With this modification, we can further simplify the code for apIs and remove tryâ€¦ Catch structure. The new code is as follows:</p><p>TodoApi.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/todo"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ApiResult <span class="title">addTodo</span><span class="params">(@Valid @RequestBody Todo todo)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        ApiResult.ApiResultBuilder builder = ApiResult.builder().succ(<span class="keyword">false</span>).build().toBuilder();</span><br><span class="line"></span><br><span class="line"><span class="comment">//        try &#123;</span></span><br><span class="line">            todoBiz.addTodo(todo);</span><br><span class="line"></span><br><span class="line">            builder.succ(<span class="keyword">true</span>);</span><br><span class="line"><span class="comment">//        &#125; catch(BizException e) &#123;</span></span><br><span class="line"><span class="comment">//            builder.msg(e.getMessage());</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> builder.build();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>When you have finished changing the code, run the program, access it with Postman, using the following parameters:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"title"</span>:<span class="string">"tom"</span>, <span class="attr">"desc"</span>:<span class="string">"desc of task 1"</span>&#125;</span><br></pre></td></tr></table></figure><p>You can get the following results:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"succ"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"code"</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="string">"Title can not be tom"</span>,</span><br><span class="line">    <span class="attr">"data"</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Next"><a href="#Next" class="headerlink" title="Next"></a>Next</h2><p>In <a href="/java/springboot-rest-api-tutorial-5-en/" title="next article">next article</a>, youâ€™ll learn how to use Swagger to automatically generate documentation and test pages for your API.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;In &lt;a href=&quot;/java/springboot-rest-api-tutorial-3-en/&quot; title=&quot;the previous article&quot;&gt;the previous article&lt;/a&gt; of the series, I will show you how to format the data returned by the Restful service interface in Spring Boot. This article will continue in depth and demonstrate how to verify the validity of the entered data.&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.mls-tech.info/categories/java/"/>
    
      <category term="SpringBoot" scheme="https://www.mls-tech.info/categories/java/springboot/"/>
    
    
      <category term="java" scheme="https://www.mls-tech.info/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Connection MySQL Error - Public Key Retrieval is not allowed</title>
    <link href="https://www.mls-tech.info/java/java-public-key-retrieval-not-allowed-en/"/>
    <id>https://www.mls-tech.info/java/java-public-key-retrieval-not-allowed-en/</id>
    <published>2022-01-18T07:11:48.000Z</published>
    <updated>2022-01-18T07:16:39.155Z</updated>
    
    <content type="html"><![CDATA[<p>When using MySqlConnector to link databases in Spring Boot app, you sometimes get an error message:</p><p>â€œcom.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Public Key Retrieval is not allowed.â€</p><p>This information refers to the address of the RSA public key that is not set on the client. An easy way to solve this problem is to add to the link string: <strong>allowPublicKeyRetrieval=true</strong>, which is to allow the client to obtain a RAS certificate from the server.</p><p>For detailed information, please refer to <a href="https://mysqlconnector.net/connection-options/" rel="external nofollow noopener noreferrer" target="_blank">Official Documentation</a>ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;When using MySqlConnector to link databases in Spring Boot app, you sometimes get an error message:&lt;/p&gt;&lt;p&gt;â€œcom.mysql.jdbc.exceptions.jdbc
      
    
    </summary>
    
      <category term="java" scheme="https://www.mls-tech.info/categories/java/"/>
    
      <category term="SpringBoot" scheme="https://www.mls-tech.info/categories/java/springboot/"/>
    
    
      <category term="java" scheme="https://www.mls-tech.info/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>How to install Jenkins on Ubuntu 20.04</title>
    <link href="https://www.mls-tech.info/linux/ubuntu-20-setup-jenkins-en/"/>
    <id>https://www.mls-tech.info/linux/ubuntu-20-setup-jenkins-en/</id>
    <published>2022-01-18T04:25:19.000Z</published>
    <updated>2022-01-18T04:55:24.248Z</updated>
    
    <content type="html"><![CDATA[<p>This article demonstrates how to install the Jenkins server in Ubuntu 20.04.</p><a id="more"></a><h2 id="Install-JDK"><a href="#Install-JDK" class="headerlink" title="Install JDK"></a>Install JDK</h2><p>First, the JDK needs to be installed, in this article, we choose to install openjdk 11.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openjdk-11-jdk</span><br></pre></td></tr></table></figure><p>After the installation is completed, we can execute the following command to confirm that the installation was successful.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><p>If successful, the system displays the following information:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">openjdk version <span class="string">"11.0.13"</span> 2021-10-19</span><br><span class="line">OpenJDK Runtime Environment (build 11.0.13+8-Ubuntu-0ubuntu1.20.04)</span><br><span class="line">OpenJDK 64-Bit Server VM (build 11.0.13+8-Ubuntu-0ubuntu1.20.04, mixed mode, sharing)</span><br></pre></td></tr></table></figure><h2 id="Install-Jenkins"><a href="#Install-Jenkins" class="headerlink" title="Install Jenkins"></a>Install Jenkins</h2><p>We will use the Jenkins APT repository, import the source GPGkey, and install the Jenkins package.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add -</span><br></pre></td></tr></table></figure><p>To add a software source to the system:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh -c <span class="string">'echo deb http://pkg.jenkins.io/debian-stable binary/ &gt; /etc/apt/sources.list.d/jenkins.list'</span></span><br></pre></td></tr></table></figure><p>Upgrade the apt package list</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><p>Install jenkins</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install jenkins</span><br></pre></td></tr></table></figure><p>After the installation is completed, we can use the â€˜systemctl statusâ€™ to check the status of service running</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status jenkins</span><br></pre></td></tr></table></figure><p>The system displays information similar to the following</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â— jenkins.service - LSB: Start Jenkins at boot time</span><br><span class="line">     Loaded: loaded (/etc/init.d/jenkins; generated)</span><br><span class="line">     Active: active (exited) since Sun 2022-01-16 11:08:29 CST; 33s ago</span><br><span class="line">       Docs: man:systemd-sysv-generator(8)</span><br><span class="line">      Tasks: 0 (<span class="built_in">limit</span>: 2269)</span><br><span class="line">     Memory: 0B</span><br><span class="line">     CGroup: /system.slice/jenkins.service</span><br></pre></td></tr></table></figure><p>The above steps complete the installation of jenkins. How to configue the jenkins can refer to other articles.</p><p>The initial password is stored in /var/lib/jenkins/secrets/initialAdminPassword.</p><p>Log file is /var/log/jenkins/jenkins.log.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;This article demonstrates how to install the Jenkins server in Ubuntu 20.04.&lt;/p&gt;
    
    </summary>
    
      <category term="Linux" scheme="https://www.mls-tech.info/categories/linux/"/>
    
    
  </entry>
  
  <entry>
    <title>How to build Rest Service with Spring Boot - A Step by Step Tutorial for Beginner - 3</title>
    <link href="https://www.mls-tech.info/java/springboot-rest-api-tutorial-3-en/"/>
    <id>https://www.mls-tech.info/java/springboot-rest-api-tutorial-3-en/</id>
    <published>2022-01-18T04:06:31.000Z</published>
    <updated>2022-01-21T01:16:15.148Z</updated>
    
    <content type="html"><![CDATA[<p>In this series of , we will show you how to access the database in Spring Boot, and this time we will go deeper and standardize the format of the data returned by the Restful service interface.</p><a id="more"></a><h2 id="Uniform-format-of-the-return-value"><a href="#Uniform-format-of-the-return-value" class="headerlink" title="Uniform format of the return value"></a>Uniform format of the return value</h2><p>The standardized and uniform data interface format is conducive to the reuse of server-side and client-side code, and enhances the maintainability of the system. In practice, for Restful service interfaces, the following data format is generally recommended:</p><ol><li>Success Flag (succ) - Defines whether the call was <strong>successful on the business</strong>, technically successfully handed over to the HTTP return value.</li><li>(Error) Return code - Typically used in the event of a <strong>Business error</strong>, returns an error code.</li><li>(Error) Message (msg) - Typically used in the event of a <strong>Business error</strong>, it returns a localized error message for the client to display itself.</li><li>Returned data - The data returned during a normal call, which can be simple data or composite data, such as objects, arrays, etc.</li></ol><p>Based on the above design, the implementation code in Java is as follows:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span>(toBuilder = <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApiResult</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> succ = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Put this class into the api.vo package. The class uses @Data annotations to generate the propertyâ€™s get/set method and @Builder to establish the corresponding constructor.</p><h2 id="Retrofitting-of-new-backlog-interfaces"><a href="#Retrofitting-of-new-backlog-interfaces" class="headerlink" title="Retrofitting of new backlog interfaces"></a>Retrofitting of new backlog interfaces</h2><p>In the original new interface implementation, the code is:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/todo"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">addTodo</span><span class="params">(@RequestBody Todo todo)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    todoBiz.addTodo(todo );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"ok"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>To change the uniform way, you need to change the return value of the function to: ApiResult, and assign the value of ApiResult according to the execution result of todoBiz.addTodo. The modified code is as follows:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/todo"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ApiResult <span class="title">addTodo</span><span class="params">(@RequestBody Todo todo)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ApiResult.ApiResultBuilder builder = ApiResult.builder().succ(<span class="keyword">false</span>).build().toBuilder();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        todoBiz.addTodo(todo);</span><br><span class="line"></span><br><span class="line">        builder.succ(<span class="keyword">true</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span>(BizException e) &#123;</span><br><span class="line">        builder.msg(e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> builder.build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Here, BizException is a custom exception class that inherits from RuntimeException, <strong>Note:</strong> Lines 4, 6, and 10 are all template-style code that can be summarized as:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ApiResult.ApiResultBuilder builder = ApiResult.builder().succ(<span class="keyword">false</span>).build().toBuilder();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Implement the business logic and throw a BizException if something goes wrong</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    builder.succ(<span class="keyword">true</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span>(BizException e) &#123;</span><br><span class="line">    builder.msg(e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> builder.build();</span><br></pre></td></tr></table></figure><p>Letâ€™s give this template a name: API Process Template, and in the following courses, we will teach you to abstract the template to simplify development.</p><p>After modifying it, run the program and send a post request using PostMan or curl simulation, with the body parameter set to:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"title"</span>:<span class="string">"task 1"</span>, <span class="attr">"desc"</span>:<span class="string">"desc of task 1"</span>&#125;</span><br></pre></td></tr></table></figure><p>The server returnsï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"succ"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"code"</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">"data"</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The description is successful, and when you view the database, you can see that the data has been inserted into the data table.</p><h2 id="Retrofitting-the-Get-To-Do-Interface"><a href="#Retrofitting-the-Get-To-Do-Interface" class="headerlink" title="Retrofitting the Get To-Do Interface"></a>Retrofitting the Get To-Do Interface</h2><p>In the original getTodoList method, the code is:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/todo"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Todo&gt; <span class="title">getTodoList</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    List&lt;Todo&gt; todos = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    todos.add(<span class="keyword">new</span> Todo(<span class="number">1</span>, <span class="string">"Call Metting"</span>, <span class="string">""</span>));</span><br><span class="line">    todos.add(<span class="keyword">new</span> Todo(<span class="number">2</span>, <span class="string">"Print File"</span>, <span class="string">""</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> todos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Now, instead, weâ€™re going to get the to-dos in the database and transform that approach with API process templates.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/todo"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ApiResult <span class="title">getTodoList</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ApiResult.ApiResultBuilder builder = ApiResult.builder().succ(<span class="keyword">false</span>).build().toBuilder();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        List&lt;Todo&gt; list = todoBiz.listAll();</span><br><span class="line">        builder.data(list).succ(<span class="keyword">true</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (BizException e) &#123;</span><br><span class="line">        builder.msg(e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> builder.build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>After modifying it, run the program and access</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/todo</span><br></pre></td></tr></table></figure><p>directly from the browser, the result is:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"succ"</span>:<span class="literal">true</span>,<span class="attr">"code"</span>:<span class="literal">null</span>,<span class="attr">"msg"</span>:<span class="literal">null</span>,<span class="attr">"data"</span>:[&#123;<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"title"</span>:<span class="string">"task 1"</span>,<span class="attr">"desc"</span>:<span class="string">"desc of task 1"</span>&#125;]&#125;</span><br></pre></td></tr></table></figure><h2 id="Next"><a href="#Next" class="headerlink" title="Next"></a>Next</h2><p>In <a href="/java/springboot-rest-api-tutorial-4-en/" title="next article">next article</a>, you will learn how to handle data checksum errors.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;In this series of , we will show you how to access the database in Spring Boot, and this time we will go deeper and standardize the format of the data returned by the Restful service interface.&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.mls-tech.info/categories/java/"/>
    
      <category term="SpringBoot" scheme="https://www.mls-tech.info/categories/java/springboot/"/>
    
    
      <category term="java" scheme="https://www.mls-tech.info/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Swift Language Tutorial for Beginner 9 - Function</title>
    <link href="https://www.mls-tech.info/app/swift/swift-tutorial-9-function-en/"/>
    <id>https://www.mls-tech.info/app/swift/swift-tutorial-9-function-en/</id>
    <published>2022-01-18T00:58:39.000Z</published>
    <updated>2022-01-18T01:22:12.670Z</updated>
    
    <content type="html"><![CDATA[<p>In <a href="/app/swift/swift-tutorial-8-set-en/" title="Swift Language Tutorial for Beginner 8 - Set">Swift Language Tutorial for Beginner 8 - Set</a>, we understand the use of collection types in Swift, and now letâ€™s take a look at the function in Swift - Function.</p><a id="more"></a><p>The syntax of functions in Swift is a little different from C/C+, Java, and may be considering integration with Objective-C (OC), so some of the features of the OC language are retained when defining and calling, which takes a little time for developers who are accustomed to C/C++ and Java to adapt.</p><h2 id="Define-a-function"><a href="#Define-a-function" class="headerlink" title="Define a function"></a>Define a function</h2><p>In Swift, you need to use the keyword â€œfuncâ€ to define the function, follow the function name, then define the arguments in parentheses, indicate the return value type with â€œ-&gt;â€, and finally follow the function body.</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">function_name</span>ï¼ˆ<span class="title">parameter</span> <span class="title">list</span>ï¼‰-&gt; <span class="title">returnning</span> <span class="title">data</span> <span class="title">type</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure><p>Letâ€™s define a function according to this definition, and the function function is to simply determine whether a number passed in is greater than 10. The definitions are as follows:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isMoreThanTen</span><span class="params">(<span class="built_in">count</span>:Int)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">count</span> &gt; <span class="number">10</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;<span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Each parameter is defined in the form of:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parameter_name: data type</span><br></pre></td></tr></table></figure><p>Multiple parameters are separated by a â€œ,â€ sign.</p><p>If there are no arguments, you can use an empty parenthesis, such as:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc1</span><span class="params">()</span></span>-&gt;<span class="type">String</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"No parameter"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>If you do not need a return value, you can define it in two ways</p><ol><li>Indicates that the return type is Void</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc2</span><span class="params">()</span></span> -&gt; <span class="type">Void</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"No parameter And No returnning value"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>Ignore â€œ-&gt;â€ directly</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc3</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Ignore returnning value"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Invoke-a-function"><a href="#Invoke-a-function" class="headerlink" title="Invoke a function"></a>Invoke a function</h2><p><strong>Note: When calling functions, the differences with C/C++ and Java are mainly in the parameter list</strong></p><p>Now, letâ€™s call the function defined in the previous section: isMoreThanTen</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">isMoreThanTen(<span class="built_in">count</span>: <span class="number">9</span>)</span><br></pre></td></tr></table></figure><p><strong>Note: Parameter names cannot be omitted when calling</strong></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">isMoreThanTen(<span class="number">20</span>) <span class="comment">// Compile Error</span></span><br></pre></td></tr></table></figure><h2 id="Understand-the-internal-and-external-names-of-parameters"><a href="#Understand-the-internal-and-external-names-of-parameters" class="headerlink" title="Understand the internal and external names of parameters"></a>Understand the internal and external names of parameters</h2><p>Letâ€™s take a look at the case where there are multiple parameters, first define a function with three parameters as followsï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc5</span><span class="params">(param1: Int,param2: Int,param3: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="comment">// Param1, param2, param3 used here are the internal naming of parameters</span></span><br><span class="line">    <span class="keyword">return</span> param1+param2+param3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Here, we introduce a unique noun in swift: the internal naming of the parameter. When calling we need to give the corresponding parameter internal name, such as calling myFunc5, we need to write like this:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myFunc5(param1: <span class="number">1</span>, param2: <span class="number">2</span>, param3: <span class="number">3</span>)</span><br></pre></td></tr></table></figure><p><strong>Note that although you give the internal name of each parameter, it does not mean that you can change the order of the parameter list</strong>ï¼ŒThe following call cannot be compiled</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myFunc5(param3: <span class="number">1</span>, param2: <span class="number">2</span>, param1: <span class="number">3</span>) <span class="comment">// Compile Error</span></span><br></pre></td></tr></table></figure><p>We can also define external parameter names for the function, such as adding the external function name to myFunc5 above, as follows:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc5</span><span class="params">(out1 param1: Int,ou2 param2: Int,ou3 param3: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> param1+param2+param3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Param1, param2, param3 used here are the internal names of the parameters, and out1, out2, out3 are the external parameter names.</p><p><strong>When there is an external parameter name, the call must be made using the external parameter name</strong>ï¼ŒSo the example above becomes:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myFunc5(out1: <span class="number">1</span>, ou2: <span class="number">2</span>, ou3: <span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>Internal parameters cannot be compiled, such as:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myFunc5(param1: <span class="number">1</span>, param2: <span class="number">2</span>, param3: <span class="number">3</span>) <span class="comment">// Compile Error</span></span><br></pre></td></tr></table></figure><p>Of course, it is also possible to display the ignore of external parameter names, which can be defined like this:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc5</span><span class="params">(param1:Int,<span class="number">_</span> param2:Int , <span class="number">_</span> param3:Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> param1 + param2 + param3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Note: Places places placeholders for external parameter names with the â€œ_ â€œ sign</strong>ï¼ŒThis allows parameter names to be ignored when invoked. as:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myFunc5(param1: <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><h2 id="Parameter-default-value-default"><a href="#Parameter-default-value-default" class="headerlink" title="Parameter default value (default)"></a>Parameter default value (default)</h2><p>When defining the parameters of a function, we can also specify default values for the parameters, and when calling, use the default values of the parameters for those that do not have an actual parameter given. as:</p><p>Define the function myFunc8 and set the default parameter param2 to 10 and param3 to 5</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc8</span><span class="params">(param1:Int,param2:Int = <span class="number">10</span> ,param3:Int = <span class="number">5</span>)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> param1 + param2 + param3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>You can call myFunc8 like this</p><ol><li>Each parameter is passed a value</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myFunc8(param1: <span class="number">1</span>, param2: <span class="number">1</span>, param3: <span class="number">1</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>Values are passed only for parameters that do not have default values set</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myFunc8(param1: <span class="number">10</span>)</span><br></pre></td></tr></table></figure><ol start="3"><li>Pass values to some parameters</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myFunc8(param1: <span class="number">20</span>, param3: <span class="number">30</span>)</span><br></pre></td></tr></table></figure><p><strong>Note that parameters with default values do not need to be arranged at the end of the parameter list</strong></p><h2 id="Variable-length-parameter"><a href="#Variable-length-parameter" class="headerlink" title="Variable length parameter"></a>Variable length parameter</h2><p>In swift, it is allowed to define an indeterminate number of arguments using â€œâ€¦â€ as in the function below, such as multiple smoothly indeterminate integer arguments in the function below, which can actually be accessed by parameter names like a list.</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc10</span><span class="params">(param:Int...)</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">count</span> <span class="keyword">in</span> param &#123;</span><br><span class="line">        sum += <span class="built_in">count</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">print</span>(sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>When called, you can give different numbers of parameters, such as:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myFunc10(param: <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line">myFunc10(param: <span class="number">12</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>Unlike Java, java that becomes the last parameter when it is necessary to become a parameter, there is no such restriction in swift, such as:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc11</span><span class="params">(param1:Int...,param2:String)</span></span>  &#123;</span><br><span class="line">    <span class="keyword">var</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">count</span> <span class="keyword">in</span> param1 &#123;</span><br><span class="line">        sum+=<span class="built_in">count</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(param2):\(sum)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Call the method:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myFunc11(param1: <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>, param2: <span class="string">"hello"</span>)</span><br></pre></td></tr></table></figure><h2 id="inout-Parameter"><a href="#inout-Parameter" class="headerlink" title="inout Parameter"></a>inout Parameter</h2><p>Usually, after passing an argument to a function, if the value of the changed parameter is changed in the function, the changed value cannot be taken out of the range of the function body. So what if you need to bring it out? Swift provides parameters of type inout.</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc12</span><span class="params">( param:<span class="keyword">inout</span> Int)</span></span>&#123;</span><br><span class="line">    param += <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In myFunc12, in order to bring out the changed param value in the function (not in a practical way of returning the value), you can add inout before the parameter type.</p><p>When calling, some special processing is required, such as calling myFunc12:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> para = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">myFunc12(param: &amp;para)</span><br><span class="line"><span class="built_in">print</span>(para)</span><br></pre></td></tr></table></figure><p><strong>Note: The &amp; symbol is added before the variable name</strong>ï¼Œ It can be understood as a â€œtake addressâ€ operation in other languages.</p><h2 id="The-function-type"><a href="#The-function-type" class="headerlink" title="The function type"></a>The function type</h2><p>In Swift, functions can also be used as a data type, called function pointers in C/C++. The syntax for the declaration of a function type is to remove the function body from the syntax of the function definition, such as:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addFunc:(<span class="type">Int</span>,<span class="type">Int</span>)-&gt;<span class="type">Int</span></span><br></pre></td></tr></table></figure><p>This way, we declare a function variable with two Int arguments and an Int return type. For this variable, we can have several ways of assigning values.</p><ol><li>Directly assign a defined function, such as:</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc13</span><span class="params">(param1:Int,param2:Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> param2+param1</span><br><span class="line">&#125;</span><br><span class="line">addFunc = myFunc13</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œ</span></span><br><span class="line">addFunc(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><ol start="2"><li>Returned by a function</li></ol><p>We construct a function to assign a value to this variable.</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc15</span><span class="params">()</span></span> -&gt; (<span class="type">Int</span>,<span class="type">Int</span>)-&gt;<span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;(param1:<span class="type">Int</span>, param2:<span class="type">Int</span>) <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">return</span> param1 + param2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">addFunc = myFunc15()</span><br><span class="line"></span><br><span class="line"><span class="comment">// Invoke</span></span><br><span class="line">addFunc(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>Of course, we can also write:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc16</span><span class="params">()</span></span> -&gt; (<span class="type">Int</span>,<span class="type">Int</span>)-&gt;<span class="type">Int</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">subFunc</span><span class="params">(param1:Int, param2:Int)</span></span>-&gt;<span class="type">Int</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> param1 + param2</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> subFunc</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">addFunc = myFunc16()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œ</span></span><br><span class="line">addFunc(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><ol start="3"><li>Defines an anonymous function</li></ol><p>Code as the following:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">addFunc = &#123;</span><br><span class="line">            (param1:<span class="type">Int</span>,param2:<span class="type">Int</span>) <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">return</span> param1+param2</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Invoke</span></span><br><span class="line">addFunc(<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure><h2 id="Use-a-function-type-in-an-argument"><a href="#Use-a-function-type-in-an-argument" class="headerlink" title="Use a function type in an argument"></a>Use a function type in an argument</h2><p>Since functions can be used as a data type, they can also be used in parameter lists, such as:</p><p>For example: Defines a function that can pass in a function type of type (Int,Int)-&gt;Int,</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc14</span><span class="params">(param:<span class="params">(Int, Int)</span></span></span>-&gt;<span class="type">Int</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span>(param(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Next, you can use the addFunc defined in the previous section as the calling myFunc14 parameter:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myFunc14(param: addFunc)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;In &lt;a href=&quot;/app/swift/swift-tutorial-8-set-en/&quot; title=&quot;Swift Language Tutorial for Beginner 8 - Set&quot;&gt;Swift Language Tutorial for Beginner 8 - Set&lt;/a&gt;, we understand the use of collection types in Swift, and now letâ€™s take a look at the function in Swift - Function.&lt;/p&gt;
    
    </summary>
    
      <category term="App Development" scheme="https://www.mls-tech.info/categories/app/"/>
    
      <category term="Swift" scheme="https://www.mls-tech.info/categories/app/swift/"/>
    
    
      <category term="ç§»åŠ¨å¼€å‘" scheme="https://www.mls-tech.info/tags/app/"/>
    
      <category term="Swift" scheme="https://www.mls-tech.info/tags/swift/"/>
    
  </entry>
  
</feed>
